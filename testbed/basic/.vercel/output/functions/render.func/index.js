var Gi=Object.create;var ur=Object.defineProperty;var Zi=Object.getOwnPropertyDescriptor;var Ki=Object.getOwnPropertyNames;var Ji=Object.getPrototypeOf,Xi=Object.prototype.hasOwnProperty;var cr=(r,n)=>()=>(r&&(n=r(r=0)),n);var aa=(r,n)=>{for(var o in n)ur(r,o,{get:n[o],enumerable:!0})},Bn=(r,n,o,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let l of Ki(n))!Xi.call(r,l)&&l!==o&&ur(r,l,{get:()=>n[l],enumerable:!(i=Zi(n,l))||i.enumerable});return r};var ge=(r,n,o)=>(o=r!=null?Gi(Ji(r)):{},Bn(n||!r||!r.__esModule?ur(o,"default",{value:r,enumerable:!0}):o,r)),es=r=>Bn(ur({},"__esModule",{value:!0}),r);var ts,Wn,rs,On,as,ns,Rt,fr,os,na,qn,F,ue,K,Tt=cr(()=>{"use strict";ts=Object.create,Wn=Object.defineProperty,rs=Object.getOwnPropertyDescriptor,On=Object.getOwnPropertyNames,as=Object.getPrototypeOf,ns=Object.prototype.hasOwnProperty,Rt=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(n,o)=>(typeof require<"u"?require:n)[o]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')}),fr=(r,n)=>function(){return n||(0,r[On(r)[0]])((n={exports:{}}).exports,n),n.exports},os=(r,n,o,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let l of On(n))!ns.call(r,l)&&l!==o&&Wn(r,l,{get:()=>n[l],enumerable:!(i=rs(n,l))||i.enumerable});return r},na=(r,n,o)=>(o=r!=null?ts(as(r)):{},os(n||!r||!r.__esModule?Wn(o,"default",{value:r,enumerable:!0}):o,r)),qn=(r,n,o)=>{if(!n.has(r))throw TypeError("Cannot "+o)},F=(r,n,o)=>(qn(r,n,"read from private field"),o?o.call(r):n.get(r)),ue=(r,n,o)=>{if(n.has(r))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(r):n.set(r,o)},K=(r,n,o,i)=>(qn(r,n,"write to private field"),i?i.call(r,o):n.set(r,o),o)});async function*oa(r,n=!0){for(let o of r)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(n){let i=o.byteOffset,l=o.byteOffset+o.byteLength;for(;i!==l;){let c=Math.min(l-i,Dn),h=o.buffer.slice(i,i+c);i+=h.byteLength,yield new Uint8Array(h)}}else yield o;else{let i=0,l=o;for(;i!==l.size;){let h=await l.slice(i,Math.min(l.size,i+Dn)).arrayBuffer();i+=h.byteLength,yield new Uint8Array(h)}}}function $n(r,n=je){var o=`${jn()}${jn()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],l=`--${o}\r
Content-Disposition: form-data; name="`;return r.forEach((c,h)=>typeof c=="string"?i.push(l+sa(h)+`"\r
\r
${c.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(l+sa(h)+`"; filename="${sa(c.name,1)}"\r
Content-Type: ${c.type||"application/octet-stream"}\r
\r
`,c,`\r
`)),i.push(`--${o}--`),new n(i,{type:"multipart/form-data; boundary="+o})}var Le,Mn,is,ss,ls,fl,Dn,Ee,dr,et,ia,pr,In,us,je,mr,hr,zn,cs,fs,at,Ct,ds,ps,jn,ms,Fn,sa,ze,oe,Ln,Fe,hs,la,Un,Hn,Nn,Vn,Yn,Qn,tt,rt,Gn,Zn,ua=cr(()=>{"use strict";Tt();Le=require("fs"),Mn=require("path"),is=fr({"../../node_modules/.pnpm/web-streams-polyfill@3.2.1/node_modules/web-streams-polyfill/dist/ponyfill.es2018.js"(r,n){(function(o,i){typeof r=="object"&&typeof n<"u"?i(r):typeof define=="function"&&define.amd?define(["exports"],i):(o=typeof globalThis<"u"?globalThis:o||self,i(o.WebStreamsPolyfill={}))})(r,function(o){"use strict";let i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function l(){}function c(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let h=c();function d(e){return typeof e=="object"&&e!==null||typeof e=="function"}let _=l,g=Promise,A=Promise.prototype.then,k=Promise.resolve.bind(g),T=Promise.reject.bind(g);function y(e){return new g(e)}function m(e){return k(e)}function b(e){return T(e)}function C(e,t,a){return A.call(e,t,a)}function w(e,t,a){C(C(e,t,a),void 0,_)}function D(e,t){w(e,t)}function L(e,t){w(e,void 0,t)}function R(e,t,a){return C(e,t,a)}function q(e){C(e,void 0,_)}let B=(()=>{let e=h&&h.queueMicrotask;if(typeof e=="function")return e;let t=m(void 0);return a=>C(t,a)})();function M(e,t,a){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,a)}function H(e,t,a){try{return m(M(e,t,a))}catch(s){return b(s)}}let fe=16384;class ee{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(t){let a=this._back,s=a;a._elements.length===fe-1&&(s={_elements:[],_next:void 0}),a._elements.push(t),s!==a&&(this._back=s,a._next=s),++this._size}shift(){let t=this._front,a=t,s=this._cursor,u=s+1,f=t._elements,p=f[s];return u===fe&&(a=t._next,u=0),--this._size,this._cursor=u,t!==a&&(this._front=a),f[s]=void 0,p}forEach(t){let a=this._cursor,s=this._front,u=s._elements;for(;(a!==u.length||s._next!==void 0)&&!(a===u.length&&(s=s._next,u=s._elements,a=0,u.length===0));)t(u[a]),++a}peek(){let t=this._front,a=this._cursor;return t._elements[a]}}function ha(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?Er(e):t._state==="closed"?To(e):ba(e,t._storedError)}function Cr(e,t){let a=e._ownerReadableStream;return ae(a,t)}function de(e){e._ownerReadableStream._state==="readable"?xr(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Co(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function Me(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Er(e){e._closedPromise=y((t,a)=>{e._closedPromise_resolve=t,e._closedPromise_reject=a})}function ba(e,t){Er(e),xr(e,t)}function To(e){Er(e),ga(e)}function xr(e,t){e._closedPromise_reject!==void 0&&(q(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Co(e,t){ba(e,t)}function ga(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let ya=i("[[AbortSteps]]"),_a=i("[[ErrorSteps]]"),Pr=i("[[CancelSteps]]"),Ar=i("[[PullSteps]]"),Sa=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Eo=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function xo(e){return typeof e=="object"||typeof e=="function"}function pe(e,t){if(e!==void 0&&!xo(e))throw new TypeError(`${t} is not an object.`)}function te(e,t){if(typeof e!="function")throw new TypeError(`${t} is not a function.`)}function Po(e){return typeof e=="object"&&e!==null||typeof e=="function"}function wa(e,t){if(!Po(e))throw new TypeError(`${t} is not an object.`)}function me(e,t,a){if(e===void 0)throw new TypeError(`Parameter ${t} is required in '${a}'.`)}function kr(e,t,a){if(e===void 0)throw new TypeError(`${t} is required in '${a}'.`)}function Br(e){return Number(e)}function va(e){return e===0?0:e}function Ao(e){return va(Eo(e))}function Ra(e,t){let s=Number.MAX_SAFE_INTEGER,u=Number(e);if(u=va(u),!Sa(u))throw new TypeError(`${t} is not a finite number`);if(u=Ao(u),u<0||u>s)throw new TypeError(`${t} is outside the accepted range of ${0} to ${s}, inclusive`);return!Sa(u)||u===0?0:u}function Wr(e,t){if(!Re(e))throw new TypeError(`${t} is not a ReadableStream.`)}function Ue(e){return new lt(e)}function Ta(e,t){e._reader._readRequests.push(t)}function Or(e,t,a){let u=e._reader._readRequests.shift();a?u._closeSteps():u._chunkSteps(t)}function Bt(e){return e._reader._readRequests.length}function Ca(e){let t=e._reader;return!(t===void 0||!_e(t))}class lt{constructor(t){if(me(t,1,"ReadableStreamDefaultReader"),Wr(t,"First parameter"),Te(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ha(this,t),this._readRequests=new ee}get closed(){return _e(this)?this._closedPromise:b(Wt("closed"))}cancel(t=void 0){return _e(this)?this._ownerReadableStream===void 0?b(Me("cancel")):Cr(this,t):b(Wt("cancel"))}read(){if(!_e(this))return b(Wt("read"));if(this._ownerReadableStream===void 0)return b(Me("read from"));let t,a,s=y((f,p)=>{t=f,a=p});return ut(this,{_chunkSteps:f=>t({value:f,done:!1}),_closeSteps:()=>t({value:void 0,done:!0}),_errorSteps:f=>a(f)}),s}releaseLock(){if(!_e(this))throw Wt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");de(this)}}}Object.defineProperties(lt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof i.toStringTag=="symbol"&&Object.defineProperty(lt.prototype,i.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function _e(e){return!d(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof lt}function ut(e,t){let a=e._ownerReadableStream;a._disturbed=!0,a._state==="closed"?t._closeSteps():a._state==="errored"?t._errorSteps(a._storedError):a._readableStreamController[Ar](t)}function Wt(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let Ea=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class xa{constructor(t,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=t,this._preventCancel=a}next(){let t=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?R(this._ongoingPromise,t,t):t(),this._ongoingPromise}return(t){let a=()=>this._returnSteps(t);return this._ongoingPromise?R(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let t=this._reader;if(t._ownerReadableStream===void 0)return b(Me("iterate"));let a,s,u=y((p,S)=>{a=p,s=S});return ut(t,{_chunkSteps:p=>{this._ongoingPromise=void 0,B(()=>a({value:p,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,de(t),a({value:void 0,done:!0})},_errorSteps:p=>{this._ongoingPromise=void 0,this._isFinished=!0,de(t),s(p)}}),u}_returnSteps(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;let a=this._reader;if(a._ownerReadableStream===void 0)return b(Me("finish iterating"));if(!this._preventCancel){let s=Cr(a,t);return de(a),R(s,()=>({value:t,done:!0}))}return de(a),m({value:t,done:!0})}}let Pa={next(){return Aa(this)?this._asyncIteratorImpl.next():b(ka("next"))},return(e){return Aa(this)?this._asyncIteratorImpl.return(e):b(ka("return"))}};Ea!==void 0&&Object.setPrototypeOf(Pa,Ea);function ko(e,t){let a=Ue(e),s=new xa(a,t),u=Object.create(Pa);return u._asyncIteratorImpl=s,u}function Aa(e){if(!d(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof xa}catch{return!1}}function ka(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Ba=Number.isNaN||function(e){return e!==e};function ct(e){return e.slice()}function Wa(e,t,a,s,u){new Uint8Array(e).set(new Uint8Array(a,s,u),t)}function sl(e){return e}function Ot(e){return!1}function Oa(e,t,a){if(e.slice)return e.slice(t,a);let s=a-t,u=new ArrayBuffer(s);return Wa(u,0,e,t,s),u}function Bo(e){return!(typeof e!="number"||Ba(e)||e<0)}function qa(e){let t=Oa(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function qr(e){let t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function Dr(e,t,a){if(!Bo(a)||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:a}),e._queueTotalSize+=a}function Wo(e){return e._queue.peek().value}function Se(e){e._queue=new ee,e._queueTotalSize=0}class ft{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!zr(this))throw Ir("view");return this._view}respond(t){if(!zr(this))throw Ir("respond");if(me(t,1,"respond"),t=Ra(t,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Ot(this._view.buffer),Ft(this._associatedReadableByteStreamController,t)}respondWithNewView(t){if(!zr(this))throw Ir("respondWithNewView");if(me(t,1,"respondWithNewView"),!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Ot(t.buffer),Lt(this._associatedReadableByteStreamController,t)}}Object.defineProperties(ft.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof i.toStringTag=="symbol"&&Object.defineProperty(ft.prototype,i.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class He{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!ke(this))throw pt("byobRequest");return Lr(this)}get desiredSize(){if(!ke(this))throw pt("desiredSize");return Ma(this)}close(){if(!ke(this))throw pt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be closed`);dt(this)}enqueue(t){if(!ke(this))throw pt("enqueue");if(me(t,1,"enqueue"),!ArrayBuffer.isView(t))throw new TypeError("chunk must be an array buffer view");if(t.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(t.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);jt(this,t)}error(t=void 0){if(!ke(this))throw pt("error");re(this,t)}[Pr](t){Da(this),Se(this);let a=this._cancelAlgorithm(t);return zt(this),a}[Ar](t){let a=this._controlledReadableByteStream;if(this._queueTotalSize>0){let u=this._queue.shift();this._queueTotalSize-=u.byteLength,La(this);let f=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);t._chunkSteps(f);return}let s=this._autoAllocateChunkSize;if(s!==void 0){let u;try{u=new ArrayBuffer(s)}catch(p){t._errorSteps(p);return}let f={buffer:u,bufferByteLength:s,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(f)}Ta(a,t),Be(this)}}Object.defineProperties(He.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof i.toStringTag=="symbol"&&Object.defineProperty(He.prototype,i.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function ke(e){return!d(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof He}function zr(e){return!d(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof ft}function Be(e){if(!zo(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();w(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Be(e))},s=>{re(e,s)})}function Da(e){Fr(e),e._pendingPullIntos=new ee}function jr(e,t){let a=!1;e._state==="closed"&&(a=!0);let s=za(t);t.readerType==="default"?Or(e,s,a):Lo(e,s,a)}function za(e){let t=e.bytesFilled,a=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/a)}function qt(e,t,a,s){e._queue.push({buffer:t,byteOffset:a,byteLength:s}),e._queueTotalSize+=s}function ja(e,t){let a=t.elementSize,s=t.bytesFilled-t.bytesFilled%a,u=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),f=t.bytesFilled+u,p=f-f%a,S=u,E=!1;p>s&&(S=p-t.bytesFilled,E=!0);let P=e._queue;for(;S>0;){let W=P.peek(),O=Math.min(S,W.byteLength),I=t.byteOffset+t.bytesFilled;Wa(t.buffer,I,W.buffer,W.byteOffset,O),W.byteLength===O?P.shift():(W.byteOffset+=O,W.byteLength-=O),e._queueTotalSize-=O,Fa(e,O,t),S-=O}return E}function Fa(e,t,a){a.bytesFilled+=t}function La(e){e._queueTotalSize===0&&e._closeRequested?(zt(e),wt(e._controlledReadableByteStream)):Be(e)}function Fr(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Ia(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let t=e._pendingPullIntos.peek();ja(e,t)&&(Dt(e),jr(e._controlledReadableByteStream,t))}}function Oo(e,t,a){let s=e._controlledReadableByteStream,u=1;t.constructor!==DataView&&(u=t.constructor.BYTES_PER_ELEMENT);let f=t.constructor,p=t.buffer,S={buffer:p,bufferByteLength:p.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:u,viewConstructor:f,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(S),Na(s,a);return}if(s._state==="closed"){let E=new f(S.buffer,S.byteOffset,0);a._closeSteps(E);return}if(e._queueTotalSize>0){if(ja(e,S)){let E=za(S);La(e),a._chunkSteps(E);return}if(e._closeRequested){let E=new TypeError("Insufficient bytes to fill elements in the given buffer");re(e,E),a._errorSteps(E);return}}e._pendingPullIntos.push(S),Na(s,a),Be(e)}function qo(e,t){let a=e._controlledReadableByteStream;if($r(a))for(;Va(a)>0;){let s=Dt(e);jr(a,s)}}function Do(e,t,a){if(Fa(e,t,a),a.bytesFilled<a.elementSize)return;Dt(e);let s=a.bytesFilled%a.elementSize;if(s>0){let u=a.byteOffset+a.bytesFilled,f=Oa(a.buffer,u-s,u);qt(e,f,0,f.byteLength)}a.bytesFilled-=s,jr(e._controlledReadableByteStream,a),Ia(e)}function $a(e,t){let a=e._pendingPullIntos.peek();Fr(e),e._controlledReadableByteStream._state==="closed"?qo(e):Do(e,t,a),Be(e)}function Dt(e){return e._pendingPullIntos.shift()}function zo(e){let t=e._controlledReadableByteStream;return t._state!=="readable"||e._closeRequested||!e._started?!1:!!(Ca(t)&&Bt(t)>0||$r(t)&&Va(t)>0||Ma(e)>0)}function zt(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function dt(e){let t=e._controlledReadableByteStream;if(!(e._closeRequested||t._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let s=new TypeError("Insufficient bytes to fill elements in the given buffer");throw re(e,s),s}zt(e),wt(t)}}function jt(e,t){let a=e._controlledReadableByteStream;if(e._closeRequested||a._state!=="readable")return;let s=t.buffer,u=t.byteOffset,f=t.byteLength,p=s;if(e._pendingPullIntos.length>0){let S=e._pendingPullIntos.peek();Ot(S.buffer),S.buffer=S.buffer}if(Fr(e),Ca(a))if(Bt(a)===0)qt(e,p,u,f);else{e._pendingPullIntos.length>0&&Dt(e);let S=new Uint8Array(p,u,f);Or(a,S,!1)}else $r(a)?(qt(e,p,u,f),Ia(e)):qt(e,p,u,f);Be(e)}function re(e,t){let a=e._controlledReadableByteStream;a._state==="readable"&&(Da(e),Se(e),zt(e),gn(a,t))}function Lr(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let t=e._pendingPullIntos.peek(),a=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),s=Object.create(ft.prototype);Fo(s,e,a),e._byobRequest=s}return e._byobRequest}function Ma(e){let t=e._controlledReadableByteStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function Ft(e,t){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(t===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+t>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=a.buffer,$a(e,t)}function Lt(e,t){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(t.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+t.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let u=t.byteLength;a.buffer=t.buffer,$a(e,u)}function Ua(e,t,a,s,u,f,p){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,Se(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=f,t._pullAlgorithm=s,t._cancelAlgorithm=u,t._autoAllocateChunkSize=p,t._pendingPullIntos=new ee,e._readableStreamController=t;let S=a();w(m(S),()=>{t._started=!0,Be(t)},E=>{re(t,E)})}function jo(e,t,a){let s=Object.create(He.prototype),u=()=>{},f=()=>m(void 0),p=()=>m(void 0);t.start!==void 0&&(u=()=>t.start(s)),t.pull!==void 0&&(f=()=>t.pull(s)),t.cancel!==void 0&&(p=E=>t.cancel(E));let S=t.autoAllocateChunkSize;if(S===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Ua(e,s,u,f,p,a,S)}function Fo(e,t,a){e._associatedReadableByteStreamController=t,e._view=a}function Ir(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function pt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Ha(e){return new mt(e)}function Na(e,t){e._reader._readIntoRequests.push(t)}function Lo(e,t,a){let u=e._reader._readIntoRequests.shift();a?u._closeSteps(t):u._chunkSteps(t)}function Va(e){return e._reader._readIntoRequests.length}function $r(e){let t=e._reader;return!(t===void 0||!We(t))}class mt{constructor(t){if(me(t,1,"ReadableStreamBYOBReader"),Wr(t,"First parameter"),Te(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!ke(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");ha(this,t),this._readIntoRequests=new ee}get closed(){return We(this)?this._closedPromise:b(It("closed"))}cancel(t=void 0){return We(this)?this._ownerReadableStream===void 0?b(Me("cancel")):Cr(this,t):b(It("cancel"))}read(t){if(!We(this))return b(It("read"));if(!ArrayBuffer.isView(t))return b(new TypeError("view must be an array buffer view"));if(t.byteLength===0)return b(new TypeError("view must have non-zero byteLength"));if(t.buffer.byteLength===0)return b(new TypeError("view's buffer must have non-zero byteLength"));if(Ot(t.buffer),this._ownerReadableStream===void 0)return b(Me("read from"));let a,s,u=y((p,S)=>{a=p,s=S});return Ya(this,t,{_chunkSteps:p=>a({value:p,done:!1}),_closeSteps:p=>a({value:p,done:!0}),_errorSteps:p=>s(p)}),u}releaseLock(){if(!We(this))throw It("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");de(this)}}}Object.defineProperties(mt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof i.toStringTag=="symbol"&&Object.defineProperty(mt.prototype,i.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function We(e){return!d(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof mt}function Ya(e,t,a){let s=e._ownerReadableStream;s._disturbed=!0,s._state==="errored"?a._errorSteps(s._storedError):Oo(s._readableStreamController,t,a)}function It(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function ht(e,t){let{highWaterMark:a}=e;if(a===void 0)return t;if(Ba(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function $t(e){let{size:t}=e;return t||(()=>1)}function Mt(e,t){pe(e,t);let a=e==null?void 0:e.highWaterMark,s=e==null?void 0:e.size;return{highWaterMark:a===void 0?void 0:Br(a),size:s===void 0?void 0:Io(s,`${t} has member 'size' that`)}}function Io(e,t){return te(e,t),a=>Br(e(a))}function $o(e,t){pe(e,t);let a=e==null?void 0:e.abort,s=e==null?void 0:e.close,u=e==null?void 0:e.start,f=e==null?void 0:e.type,p=e==null?void 0:e.write;return{abort:a===void 0?void 0:Mo(a,e,`${t} has member 'abort' that`),close:s===void 0?void 0:Uo(s,e,`${t} has member 'close' that`),start:u===void 0?void 0:Ho(u,e,`${t} has member 'start' that`),write:p===void 0?void 0:No(p,e,`${t} has member 'write' that`),type:f}}function Mo(e,t,a){return te(e,a),s=>H(e,t,[s])}function Uo(e,t,a){return te(e,a),()=>H(e,t,[])}function Ho(e,t,a){return te(e,a),s=>M(e,t,[s])}function No(e,t,a){return te(e,a),(s,u)=>H(e,t,[s,u])}function Qa(e,t){if(!Ne(e))throw new TypeError(`${t} is not a WritableStream.`)}function Vo(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Yo=typeof AbortController=="function";function Qo(){if(Yo)return new AbortController}class bt{constructor(t={},a={}){t===void 0?t=null:wa(t,"First parameter");let s=Mt(a,"Second parameter"),u=$o(t,"First parameter");if(Za(this),u.type!==void 0)throw new RangeError("Invalid type is specified");let p=$t(s),S=ht(s,1);li(this,u,S,p)}get locked(){if(!Ne(this))throw Yt("locked");return Ve(this)}abort(t=void 0){return Ne(this)?Ve(this)?b(new TypeError("Cannot abort a stream that already has a writer")):Ut(this,t):b(Yt("abort"))}close(){return Ne(this)?Ve(this)?b(new TypeError("Cannot close a stream that already has a writer")):le(this)?b(new TypeError("Cannot close an already-closing stream")):Ka(this):b(Yt("close"))}getWriter(){if(!Ne(this))throw Yt("getWriter");return Ga(this)}}Object.defineProperties(bt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof i.toStringTag=="symbol"&&Object.defineProperty(bt.prototype,i.toStringTag,{value:"WritableStream",configurable:!0});function Ga(e){return new gt(e)}function Go(e,t,a,s,u=1,f=()=>1){let p=Object.create(bt.prototype);Za(p);let S=Object.create(Ye.prototype);return an(p,S,e,t,a,s,u,f),p}function Za(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new ee,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Ne(e){return!d(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof bt}function Ve(e){return e._writer!==void 0}function Ut(e,t){var a;if(e._state==="closed"||e._state==="errored")return m(void 0);e._writableStreamController._abortReason=t,(a=e._writableStreamController._abortController)===null||a===void 0||a.abort();let s=e._state;if(s==="closed"||s==="errored")return m(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let u=!1;s==="erroring"&&(u=!0,t=void 0);let f=y((p,S)=>{e._pendingAbortRequest={_promise:void 0,_resolve:p,_reject:S,_reason:t,_wasAlreadyErroring:u}});return e._pendingAbortRequest._promise=f,u||Ur(e,t),f}function Ka(e){let t=e._state;if(t==="closed"||t==="errored")return b(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));let a=y((u,f)=>{let p={_resolve:u,_reject:f};e._closeRequest=p}),s=e._writer;return s!==void 0&&e._backpressure&&t==="writable"&&Jr(s),ui(e._writableStreamController),a}function Zo(e){return y((a,s)=>{let u={_resolve:a,_reject:s};e._writeRequests.push(u)})}function Mr(e,t){if(e._state==="writable"){Ur(e,t);return}Hr(e)}function Ur(e,t){let a=e._writableStreamController;e._state="erroring",e._storedError=t;let s=e._writer;s!==void 0&&Xa(s,t),!ti(e)&&a._started&&Hr(e)}function Hr(e){e._state="errored",e._writableStreamController[_a]();let t=e._storedError;if(e._writeRequests.forEach(u=>{u._reject(t)}),e._writeRequests=new ee,e._pendingAbortRequest===void 0){Ht(e);return}let a=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(t),Ht(e);return}let s=e._writableStreamController[ya](a._reason);w(s,()=>{a._resolve(),Ht(e)},u=>{a._reject(u),Ht(e)})}function Ko(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Jo(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,Mr(e,t)}function Xo(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let a=e._writer;a!==void 0&&ln(a)}function ei(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),Mr(e,t)}function le(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function ti(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function ri(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function ai(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Ht(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let t=e._writer;t!==void 0&&Zr(t,e._storedError)}function Nr(e,t){let a=e._writer;a!==void 0&&t!==e._backpressure&&(t?bi(a):Jr(a)),e._backpressure=t}class gt{constructor(t){if(me(t,1,"WritableStreamDefaultWriter"),Qa(t,"First parameter"),Ve(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;let a=t._state;if(a==="writable")!le(t)&&t._backpressure?Gt(this):un(this),Qt(this);else if(a==="erroring")Kr(this,t._storedError),Qt(this);else if(a==="closed")un(this),mi(this);else{let s=t._storedError;Kr(this,s),sn(this,s)}}get closed(){return Oe(this)?this._closedPromise:b(qe("closed"))}get desiredSize(){if(!Oe(this))throw qe("desiredSize");if(this._ownerWritableStream===void 0)throw yt("desiredSize");return si(this)}get ready(){return Oe(this)?this._readyPromise:b(qe("ready"))}abort(t=void 0){return Oe(this)?this._ownerWritableStream===void 0?b(yt("abort")):ni(this,t):b(qe("abort"))}close(){if(!Oe(this))return b(qe("close"));let t=this._ownerWritableStream;return t===void 0?b(yt("close")):le(t)?b(new TypeError("Cannot close an already-closing stream")):Ja(this)}releaseLock(){if(!Oe(this))throw qe("releaseLock");this._ownerWritableStream!==void 0&&en(this)}write(t=void 0){return Oe(this)?this._ownerWritableStream===void 0?b(yt("write to")):tn(this,t):b(qe("write"))}}Object.defineProperties(gt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof i.toStringTag=="symbol"&&Object.defineProperty(gt.prototype,i.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Oe(e){return!d(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof gt}function ni(e,t){let a=e._ownerWritableStream;return Ut(a,t)}function Ja(e){let t=e._ownerWritableStream;return Ka(t)}function oi(e){let t=e._ownerWritableStream,a=t._state;return le(t)||a==="closed"?m(void 0):a==="errored"?b(t._storedError):Ja(e)}function ii(e,t){e._closedPromiseState==="pending"?Zr(e,t):hi(e,t)}function Xa(e,t){e._readyPromiseState==="pending"?cn(e,t):gi(e,t)}function si(e){let t=e._ownerWritableStream,a=t._state;return a==="errored"||a==="erroring"?null:a==="closed"?0:nn(t._writableStreamController)}function en(e){let t=e._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Xa(e,a),ii(e,a),t._writer=void 0,e._ownerWritableStream=void 0}function tn(e,t){let a=e._ownerWritableStream,s=a._writableStreamController,u=ci(s,t);if(a!==e._ownerWritableStream)return b(yt("write to"));let f=a._state;if(f==="errored")return b(a._storedError);if(le(a)||f==="closed")return b(new TypeError("The stream is closing or closed and cannot be written to"));if(f==="erroring")return b(a._storedError);let p=Zo(a);return fi(s,t,u),p}let rn={};class Ye{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Vr(this))throw Gr("abortReason");return this._abortReason}get signal(){if(!Vr(this))throw Gr("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(t=void 0){if(!Vr(this))throw Gr("error");this._controlledWritableStream._state==="writable"&&on(this,t)}[ya](t){let a=this._abortAlgorithm(t);return Nt(this),a}[_a](){Se(this)}}Object.defineProperties(Ye.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof i.toStringTag=="symbol"&&Object.defineProperty(Ye.prototype,i.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Vr(e){return!d(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Ye}function an(e,t,a,s,u,f,p,S){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,Se(t),t._abortReason=void 0,t._abortController=Qo(),t._started=!1,t._strategySizeAlgorithm=S,t._strategyHWM=p,t._writeAlgorithm=s,t._closeAlgorithm=u,t._abortAlgorithm=f;let E=Qr(t);Nr(e,E);let P=a(),W=m(P);w(W,()=>{t._started=!0,Vt(t)},O=>{t._started=!0,Mr(e,O)})}function li(e,t,a,s){let u=Object.create(Ye.prototype),f=()=>{},p=()=>m(void 0),S=()=>m(void 0),E=()=>m(void 0);t.start!==void 0&&(f=()=>t.start(u)),t.write!==void 0&&(p=P=>t.write(P,u)),t.close!==void 0&&(S=()=>t.close()),t.abort!==void 0&&(E=P=>t.abort(P)),an(e,u,f,p,S,E,a,s)}function Nt(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ui(e){Dr(e,rn,0),Vt(e)}function ci(e,t){try{return e._strategySizeAlgorithm(t)}catch(a){return Yr(e,a),1}}function nn(e){return e._strategyHWM-e._queueTotalSize}function fi(e,t,a){try{Dr(e,t,a)}catch(u){Yr(e,u);return}let s=e._controlledWritableStream;if(!le(s)&&s._state==="writable"){let u=Qr(e);Nr(s,u)}Vt(e)}function Vt(e){let t=e._controlledWritableStream;if(!e._started||t._inFlightWriteRequest!==void 0)return;if(t._state==="erroring"){Hr(t);return}if(e._queue.length===0)return;let s=Wo(e);s===rn?di(e):pi(e,s)}function Yr(e,t){e._controlledWritableStream._state==="writable"&&on(e,t)}function di(e){let t=e._controlledWritableStream;ri(t),qr(e);let a=e._closeAlgorithm();Nt(e),w(a,()=>{Xo(t)},s=>{ei(t,s)})}function pi(e,t){let a=e._controlledWritableStream;ai(a);let s=e._writeAlgorithm(t);w(s,()=>{Ko(a);let u=a._state;if(qr(e),!le(a)&&u==="writable"){let f=Qr(e);Nr(a,f)}Vt(e)},u=>{a._state==="writable"&&Nt(e),Jo(a,u)})}function Qr(e){return nn(e)<=0}function on(e,t){let a=e._controlledWritableStream;Nt(e),Ur(a,t)}function Yt(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Gr(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function qe(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function yt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Qt(e){e._closedPromise=y((t,a)=>{e._closedPromise_resolve=t,e._closedPromise_reject=a,e._closedPromiseState="pending"})}function sn(e,t){Qt(e),Zr(e,t)}function mi(e){Qt(e),ln(e)}function Zr(e,t){e._closedPromise_reject!==void 0&&(q(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function hi(e,t){sn(e,t)}function ln(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Gt(e){e._readyPromise=y((t,a)=>{e._readyPromise_resolve=t,e._readyPromise_reject=a}),e._readyPromiseState="pending"}function Kr(e,t){Gt(e),cn(e,t)}function un(e){Gt(e),Jr(e)}function cn(e,t){e._readyPromise_reject!==void 0&&(q(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function bi(e){Gt(e)}function gi(e,t){Kr(e,t)}function Jr(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let fn=typeof DOMException<"u"?DOMException:void 0;function yi(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function _i(){let e=function(a,s){this.message=a||"",this.name=s||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let Si=yi(fn)?fn:_i();function dn(e,t,a,s,u,f){let p=Ue(e),S=Ga(t);e._disturbed=!0;let E=!1,P=m(void 0);return y((W,O)=>{let I;if(f!==void 0){if(I=()=>{let v=new Si("Aborted","AbortError"),x=[];s||x.push(()=>t._state==="writable"?Ut(t,v):m(void 0)),u||x.push(()=>e._state==="readable"?ae(e,v):m(void 0)),N(()=>Promise.all(x.map(z=>z())),!0,v)},f.aborted){I();return}f.addEventListener("abort",I)}function ne(){return y((v,x)=>{function z(Y){Y?v():C(Ze(),z,x)}z(!1)})}function Ze(){return E?m(!0):C(S._readyPromise,()=>y((v,x)=>{ut(p,{_chunkSteps:z=>{P=C(tn(S,z),void 0,l),v(!1)},_closeSteps:()=>v(!0),_errorSteps:x})}))}if(he(e,p._closedPromise,v=>{s?Z(!0,v):N(()=>Ut(t,v),!0,v)}),he(t,S._closedPromise,v=>{u?Z(!0,v):N(()=>ae(e,v),!0,v)}),U(e,p._closedPromise,()=>{a?Z():N(()=>oi(S))}),le(t)||t._state==="closed"){let v=new TypeError("the destination writable stream closed before all data could be piped to it");u?Z(!0,v):N(()=>ae(e,v),!0,v)}q(ne());function Ce(){let v=P;return C(P,()=>v!==P?Ce():void 0)}function he(v,x,z){v._state==="errored"?z(v._storedError):L(x,z)}function U(v,x,z){v._state==="closed"?z():D(x,z)}function N(v,x,z){if(E)return;E=!0,t._state==="writable"&&!le(t)?D(Ce(),Y):Y();function Y(){w(v(),()=>be(x,z),Ke=>be(!0,Ke))}}function Z(v,x){E||(E=!0,t._state==="writable"&&!le(t)?D(Ce(),()=>be(v,x)):be(v,x))}function be(v,x){en(S),de(p),f!==void 0&&f.removeEventListener("abort",I),v?O(x):W(void 0)}})}class Qe{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Zt(this))throw Xt("desiredSize");return Xr(this)}close(){if(!Zt(this))throw Xt("close");if(!Ge(this))throw new TypeError("The stream is not in a state that permits close");St(this)}enqueue(t=void 0){if(!Zt(this))throw Xt("enqueue");if(!Ge(this))throw new TypeError("The stream is not in a state that permits enqueue");return Jt(this,t)}error(t=void 0){if(!Zt(this))throw Xt("error");we(this,t)}[Pr](t){Se(this);let a=this._cancelAlgorithm(t);return Kt(this),a}[Ar](t){let a=this._controlledReadableStream;if(this._queue.length>0){let s=qr(this);this._closeRequested&&this._queue.length===0?(Kt(this),wt(a)):_t(this),t._chunkSteps(s)}else Ta(a,t),_t(this)}}Object.defineProperties(Qe.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof i.toStringTag=="symbol"&&Object.defineProperty(Qe.prototype,i.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Zt(e){return!d(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Qe}function _t(e){if(!pn(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();w(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,_t(e))},s=>{we(e,s)})}function pn(e){let t=e._controlledReadableStream;return!Ge(e)||!e._started?!1:!!(Te(t)&&Bt(t)>0||Xr(e)>0)}function Kt(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function St(e){if(!Ge(e))return;let t=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Kt(e),wt(t))}function Jt(e,t){if(!Ge(e))return;let a=e._controlledReadableStream;if(Te(a)&&Bt(a)>0)Or(a,t,!1);else{let s;try{s=e._strategySizeAlgorithm(t)}catch(u){throw we(e,u),u}try{Dr(e,t,s)}catch(u){throw we(e,u),u}}_t(e)}function we(e,t){let a=e._controlledReadableStream;a._state==="readable"&&(Se(e),Kt(e),gn(a,t))}function Xr(e){let t=e._controlledReadableStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function wi(e){return!pn(e)}function Ge(e){let t=e._controlledReadableStream._state;return!e._closeRequested&&t==="readable"}function mn(e,t,a,s,u,f,p){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,Se(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=p,t._strategyHWM=f,t._pullAlgorithm=s,t._cancelAlgorithm=u,e._readableStreamController=t;let S=a();w(m(S),()=>{t._started=!0,_t(t)},E=>{we(t,E)})}function vi(e,t,a,s){let u=Object.create(Qe.prototype),f=()=>{},p=()=>m(void 0),S=()=>m(void 0);t.start!==void 0&&(f=()=>t.start(u)),t.pull!==void 0&&(p=()=>t.pull(u)),t.cancel!==void 0&&(S=E=>t.cancel(E)),mn(e,u,f,p,S,a,s)}function Xt(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Ri(e,t){return ke(e._readableStreamController)?Ci(e):Ti(e)}function Ti(e,t){let a=Ue(e),s=!1,u=!1,f=!1,p=!1,S,E,P,W,O,I=y(U=>{O=U});function ne(){return s?(u=!0,m(void 0)):(s=!0,ut(a,{_chunkSteps:N=>{B(()=>{u=!1;let Z=N,be=N;f||Jt(P._readableStreamController,Z),p||Jt(W._readableStreamController,be),s=!1,u&&ne()})},_closeSteps:()=>{s=!1,f||St(P._readableStreamController),p||St(W._readableStreamController),(!f||!p)&&O(void 0)},_errorSteps:()=>{s=!1}}),m(void 0))}function Ze(U){if(f=!0,S=U,p){let N=ct([S,E]),Z=ae(e,N);O(Z)}return I}function Ce(U){if(p=!0,E=U,f){let N=ct([S,E]),Z=ae(e,N);O(Z)}return I}function he(){}return P=ea(he,ne,Ze),W=ea(he,ne,Ce),L(a._closedPromise,U=>{we(P._readableStreamController,U),we(W._readableStreamController,U),(!f||!p)&&O(void 0)}),[P,W]}function Ci(e){let t=Ue(e),a=!1,s=!1,u=!1,f=!1,p=!1,S,E,P,W,O,I=y(v=>{O=v});function ne(v){L(v._closedPromise,x=>{v===t&&(re(P._readableStreamController,x),re(W._readableStreamController,x),(!f||!p)&&O(void 0))})}function Ze(){We(t)&&(de(t),t=Ue(e),ne(t)),ut(t,{_chunkSteps:x=>{B(()=>{s=!1,u=!1;let z=x,Y=x;if(!f&&!p)try{Y=qa(x)}catch(Ke){re(P._readableStreamController,Ke),re(W._readableStreamController,Ke),O(ae(e,Ke));return}f||jt(P._readableStreamController,z),p||jt(W._readableStreamController,Y),a=!1,s?he():u&&U()})},_closeSteps:()=>{a=!1,f||dt(P._readableStreamController),p||dt(W._readableStreamController),P._readableStreamController._pendingPullIntos.length>0&&Ft(P._readableStreamController,0),W._readableStreamController._pendingPullIntos.length>0&&Ft(W._readableStreamController,0),(!f||!p)&&O(void 0)},_errorSteps:()=>{a=!1}})}function Ce(v,x){_e(t)&&(de(t),t=Ha(e),ne(t));let z=x?W:P,Y=x?P:W;Ya(t,v,{_chunkSteps:Je=>{B(()=>{s=!1,u=!1;let Xe=x?p:f;if(x?f:p)Xe||Lt(z._readableStreamController,Je);else{let kn;try{kn=qa(Je)}catch(ra){re(z._readableStreamController,ra),re(Y._readableStreamController,ra),O(ae(e,ra));return}Xe||Lt(z._readableStreamController,Je),jt(Y._readableStreamController,kn)}a=!1,s?he():u&&U()})},_closeSteps:Je=>{a=!1;let Xe=x?p:f,lr=x?f:p;Xe||dt(z._readableStreamController),lr||dt(Y._readableStreamController),Je!==void 0&&(Xe||Lt(z._readableStreamController,Je),!lr&&Y._readableStreamController._pendingPullIntos.length>0&&Ft(Y._readableStreamController,0)),(!Xe||!lr)&&O(void 0)},_errorSteps:()=>{a=!1}})}function he(){if(a)return s=!0,m(void 0);a=!0;let v=Lr(P._readableStreamController);return v===null?Ze():Ce(v._view,!1),m(void 0)}function U(){if(a)return u=!0,m(void 0);a=!0;let v=Lr(W._readableStreamController);return v===null?Ze():Ce(v._view,!0),m(void 0)}function N(v){if(f=!0,S=v,p){let x=ct([S,E]),z=ae(e,x);O(z)}return I}function Z(v){if(p=!0,E=v,f){let x=ct([S,E]),z=ae(e,x);O(z)}return I}function be(){}return P=bn(be,he,N),W=bn(be,U,Z),ne(t),[P,W]}function Ei(e,t){pe(e,t);let a=e,s=a==null?void 0:a.autoAllocateChunkSize,u=a==null?void 0:a.cancel,f=a==null?void 0:a.pull,p=a==null?void 0:a.start,S=a==null?void 0:a.type;return{autoAllocateChunkSize:s===void 0?void 0:Ra(s,`${t} has member 'autoAllocateChunkSize' that`),cancel:u===void 0?void 0:xi(u,a,`${t} has member 'cancel' that`),pull:f===void 0?void 0:Pi(f,a,`${t} has member 'pull' that`),start:p===void 0?void 0:Ai(p,a,`${t} has member 'start' that`),type:S===void 0?void 0:ki(S,`${t} has member 'type' that`)}}function xi(e,t,a){return te(e,a),s=>H(e,t,[s])}function Pi(e,t,a){return te(e,a),s=>H(e,t,[s])}function Ai(e,t,a){return te(e,a),s=>M(e,t,[s])}function ki(e,t){if(e=`${e}`,e!=="bytes")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Bi(e,t){pe(e,t);let a=e==null?void 0:e.mode;return{mode:a===void 0?void 0:Wi(a,`${t} has member 'mode' that`)}}function Wi(e,t){if(e=`${e}`,e!=="byob")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Oi(e,t){pe(e,t);let a=e==null?void 0:e.preventCancel;return{preventCancel:Boolean(a)}}function hn(e,t){pe(e,t);let a=e==null?void 0:e.preventAbort,s=e==null?void 0:e.preventCancel,u=e==null?void 0:e.preventClose,f=e==null?void 0:e.signal;return f!==void 0&&qi(f,`${t} has member 'signal' that`),{preventAbort:Boolean(a),preventCancel:Boolean(s),preventClose:Boolean(u),signal:f}}function qi(e,t){if(!Vo(e))throw new TypeError(`${t} is not an AbortSignal.`)}function Di(e,t){pe(e,t);let a=e==null?void 0:e.readable;kr(a,"readable","ReadableWritablePair"),Wr(a,`${t} has member 'readable' that`);let s=e==null?void 0:e.writable;return kr(s,"writable","ReadableWritablePair"),Qa(s,`${t} has member 'writable' that`),{readable:a,writable:s}}class ve{constructor(t={},a={}){t===void 0?t=null:wa(t,"First parameter");let s=Mt(a,"Second parameter"),u=Ei(t,"First parameter");if(ta(this),u.type==="bytes"){if(s.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let f=ht(s,0);jo(this,u,f)}else{let f=$t(s),p=ht(s,1);vi(this,u,p,f)}}get locked(){if(!Re(this))throw De("locked");return Te(this)}cancel(t=void 0){return Re(this)?Te(this)?b(new TypeError("Cannot cancel a stream that already has a reader")):ae(this,t):b(De("cancel"))}getReader(t=void 0){if(!Re(this))throw De("getReader");return Bi(t,"First parameter").mode===void 0?Ue(this):Ha(this)}pipeThrough(t,a={}){if(!Re(this))throw De("pipeThrough");me(t,1,"pipeThrough");let s=Di(t,"First parameter"),u=hn(a,"Second parameter");if(Te(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Ve(s.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let f=dn(this,s.writable,u.preventClose,u.preventAbort,u.preventCancel,u.signal);return q(f),s.readable}pipeTo(t,a={}){if(!Re(this))return b(De("pipeTo"));if(t===void 0)return b("Parameter 1 is required in 'pipeTo'.");if(!Ne(t))return b(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let s;try{s=hn(a,"Second parameter")}catch(u){return b(u)}return Te(this)?b(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Ve(t)?b(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):dn(this,t,s.preventClose,s.preventAbort,s.preventCancel,s.signal)}tee(){if(!Re(this))throw De("tee");let t=Ri(this);return ct(t)}values(t=void 0){if(!Re(this))throw De("values");let a=Oi(t,"First parameter");return ko(this,a.preventCancel)}}Object.defineProperties(ve.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof i.toStringTag=="symbol"&&Object.defineProperty(ve.prototype,i.toStringTag,{value:"ReadableStream",configurable:!0}),typeof i.asyncIterator=="symbol"&&Object.defineProperty(ve.prototype,i.asyncIterator,{value:ve.prototype.values,writable:!0,configurable:!0});function ea(e,t,a,s=1,u=()=>1){let f=Object.create(ve.prototype);ta(f);let p=Object.create(Qe.prototype);return mn(f,p,e,t,a,s,u),f}function bn(e,t,a){let s=Object.create(ve.prototype);ta(s);let u=Object.create(He.prototype);return Ua(s,u,e,t,a,0,void 0),s}function ta(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Re(e){return!d(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof ve}function Te(e){return e._reader!==void 0}function ae(e,t){if(e._disturbed=!0,e._state==="closed")return m(void 0);if(e._state==="errored")return b(e._storedError);wt(e);let a=e._reader;a!==void 0&&We(a)&&(a._readIntoRequests.forEach(u=>{u._closeSteps(void 0)}),a._readIntoRequests=new ee);let s=e._readableStreamController[Pr](t);return R(s,l)}function wt(e){e._state="closed";let t=e._reader;t!==void 0&&(ga(t),_e(t)&&(t._readRequests.forEach(a=>{a._closeSteps()}),t._readRequests=new ee))}function gn(e,t){e._state="errored",e._storedError=t;let a=e._reader;a!==void 0&&(xr(a,t),_e(a)?(a._readRequests.forEach(s=>{s._errorSteps(t)}),a._readRequests=new ee):(a._readIntoRequests.forEach(s=>{s._errorSteps(t)}),a._readIntoRequests=new ee))}function De(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function yn(e,t){pe(e,t);let a=e==null?void 0:e.highWaterMark;return kr(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Br(a)}}let _n=e=>e.byteLength;try{Object.defineProperty(_n,"name",{value:"size",configurable:!0})}catch{}class er{constructor(t){me(t,1,"ByteLengthQueuingStrategy"),t=yn(t,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!wn(this))throw Sn("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!wn(this))throw Sn("size");return _n}}Object.defineProperties(er.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof i.toStringTag=="symbol"&&Object.defineProperty(er.prototype,i.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Sn(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function wn(e){return!d(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof er}let vn=()=>1;try{Object.defineProperty(vn,"name",{value:"size",configurable:!0})}catch{}class tr{constructor(t){me(t,1,"CountQueuingStrategy"),t=yn(t,"First parameter"),this._countQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!Tn(this))throw Rn("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Tn(this))throw Rn("size");return vn}}Object.defineProperties(tr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof i.toStringTag=="symbol"&&Object.defineProperty(tr.prototype,i.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Rn(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Tn(e){return!d(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof tr}function zi(e,t){pe(e,t);let a=e==null?void 0:e.flush,s=e==null?void 0:e.readableType,u=e==null?void 0:e.start,f=e==null?void 0:e.transform,p=e==null?void 0:e.writableType;return{flush:a===void 0?void 0:ji(a,e,`${t} has member 'flush' that`),readableType:s,start:u===void 0?void 0:Fi(u,e,`${t} has member 'start' that`),transform:f===void 0?void 0:Li(f,e,`${t} has member 'transform' that`),writableType:p}}function ji(e,t,a){return te(e,a),s=>H(e,t,[s])}function Fi(e,t,a){return te(e,a),s=>M(e,t,[s])}function Li(e,t,a){return te(e,a),(s,u)=>H(e,t,[s,u])}class rr{constructor(t={},a={},s={}){t===void 0&&(t=null);let u=Mt(a,"Second parameter"),f=Mt(s,"Third parameter"),p=zi(t,"First parameter");if(p.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(p.writableType!==void 0)throw new RangeError("Invalid writableType specified");let S=ht(f,0),E=$t(f),P=ht(u,1),W=$t(u),O,I=y(ne=>{O=ne});Ii(this,I,P,W,S,E),Mi(this,p),p.start!==void 0?O(p.start(this._transformStreamController)):O(void 0)}get readable(){if(!Cn(this))throw An("readable");return this._readable}get writable(){if(!Cn(this))throw An("writable");return this._writable}}Object.defineProperties(rr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof i.toStringTag=="symbol"&&Object.defineProperty(rr.prototype,i.toStringTag,{value:"TransformStream",configurable:!0});function Ii(e,t,a,s,u,f){function p(){return t}function S(I){return Ni(e,I)}function E(I){return Vi(e,I)}function P(){return Yi(e)}e._writable=Go(p,S,P,E,a,s);function W(){return Qi(e)}function O(I){return nr(e,I),m(void 0)}e._readable=ea(p,W,O,u,f),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,or(e,!0),e._transformStreamController=void 0}function Cn(e){return!d(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof rr}function ar(e,t){we(e._readable._readableStreamController,t),nr(e,t)}function nr(e,t){En(e._transformStreamController),Yr(e._writable._writableStreamController,t),e._backpressure&&or(e,!1)}function or(e,t){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=y(a=>{e._backpressureChangePromise_resolve=a}),e._backpressure=t}class vt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!ir(this))throw sr("desiredSize");let t=this._controlledTransformStream._readable._readableStreamController;return Xr(t)}enqueue(t=void 0){if(!ir(this))throw sr("enqueue");xn(this,t)}error(t=void 0){if(!ir(this))throw sr("error");Ui(this,t)}terminate(){if(!ir(this))throw sr("terminate");Hi(this)}}Object.defineProperties(vt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof i.toStringTag=="symbol"&&Object.defineProperty(vt.prototype,i.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function ir(e){return!d(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof vt}function $i(e,t,a,s){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=a,t._flushAlgorithm=s}function Mi(e,t){let a=Object.create(vt.prototype),s=f=>{try{return xn(a,f),m(void 0)}catch(p){return b(p)}},u=()=>m(void 0);t.transform!==void 0&&(s=f=>t.transform(f,a)),t.flush!==void 0&&(u=()=>t.flush(a)),$i(e,a,s,u)}function En(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function xn(e,t){let a=e._controlledTransformStream,s=a._readable._readableStreamController;if(!Ge(s))throw new TypeError("Readable side is not in a state that permits enqueue");try{Jt(s,t)}catch(f){throw nr(a,f),a._readable._storedError}wi(s)!==a._backpressure&&or(a,!0)}function Ui(e,t){ar(e._controlledTransformStream,t)}function Pn(e,t){let a=e._transformAlgorithm(t);return R(a,void 0,s=>{throw ar(e._controlledTransformStream,s),s})}function Hi(e){let t=e._controlledTransformStream,a=t._readable._readableStreamController;St(a);let s=new TypeError("TransformStream terminated");nr(t,s)}function Ni(e,t){let a=e._transformStreamController;if(e._backpressure){let s=e._backpressureChangePromise;return R(s,()=>{let u=e._writable;if(u._state==="erroring")throw u._storedError;return Pn(a,t)})}return Pn(a,t)}function Vi(e,t){return ar(e,t),m(void 0)}function Yi(e){let t=e._readable,a=e._transformStreamController,s=a._flushAlgorithm();return En(a),R(s,()=>{if(t._state==="errored")throw t._storedError;St(t._readableStreamController)},u=>{throw ar(e,u),t._storedError})}function Qi(e){return or(e,!1),e._backpressureChangePromise}function sr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function An(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}o.ByteLengthQueuingStrategy=er,o.CountQueuingStrategy=tr,o.ReadableByteStreamController=He,o.ReadableStream=ve,o.ReadableStreamBYOBReader=mt,o.ReadableStreamBYOBRequest=ft,o.ReadableStreamDefaultController=Qe,o.ReadableStreamDefaultReader=lt,o.TransformStream=rr,o.TransformStreamDefaultController=vt,o.WritableStream=bt,o.WritableStreamDefaultController=Ye,o.WritableStreamDefaultWriter=gt,Object.defineProperty(o,"__esModule",{value:!0})})}}),ss=fr({"../../node_modules/.pnpm/fetch-blob@3.1.5/node_modules/fetch-blob/streams.cjs"(){var r=65536;if(!globalThis.ReadableStream)try{let n=Rt("process"),{emitWarning:o}=n;try{n.emitWarning=()=>{},Object.assign(globalThis,Rt("stream/web")),n.emitWarning=o}catch(i){throw n.emitWarning=o,i}}catch{Object.assign(globalThis,is())}try{let{Blob:n}=Rt("buffer");n&&!n.prototype.stream&&(n.prototype.stream=function(i){let l=0,c=this;return new ReadableStream({type:"bytes",async pull(h){let _=await c.slice(l,Math.min(c.size,l+r)).arrayBuffer();l+=_.byteLength,h.enqueue(new Uint8Array(_)),l===c.size&&h.close()}})})}catch{}}}),ls=fr({"../../node_modules/.pnpm/node-domexception@1.0.0/node_modules/node-domexception/index.js"(r,n){if(!globalThis.DOMException)try{let{MessageChannel:o}=Rt("worker_threads"),i=new o().port1,l=new ArrayBuffer;i.postMessage(l,[l,l])}catch(o){o.constructor.name==="DOMException"&&(globalThis.DOMException=o.constructor)}n.exports=globalThis.DOMException}}),fl=na(ss(),1),Dn=65536;In=(pr=class{constructor(r=[],n={}){if(ue(this,Ee,[]),ue(this,dr,""),ue(this,et,0),ue(this,ia,"transparent"),typeof r!="object"||r===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof r[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof n!="object"&&typeof n!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");n===null&&(n={});let o=new TextEncoder;for(let l of r){let c;ArrayBuffer.isView(l)?c=new Uint8Array(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)):l instanceof ArrayBuffer?c=new Uint8Array(l.slice(0)):l instanceof pr?c=l:c=o.encode(`${l}`);let h=ArrayBuffer.isView(c)?c.byteLength:c.size;h&&(K(this,et,F(this,et)+h),F(this,Ee).push(c))}K(this,ia,`${n.endings===void 0?"transparent":n.endings}`);let i=n.type===void 0?"":String(n.type);K(this,dr,/^[\x20-\x7E]*$/.test(i)?i:"")}get size(){return F(this,et)}get type(){return F(this,dr)}async text(){let r=new TextDecoder,n="";for await(let o of oa(F(this,Ee),!1))n+=r.decode(o,{stream:!0});return n+=r.decode(),n}async arrayBuffer(){let r=new Uint8Array(this.size),n=0;for await(let o of oa(F(this,Ee),!1))r.set(o,n),n+=o.length;return r.buffer}stream(){let r=oa(F(this,Ee),!0);return new globalThis.ReadableStream({type:"bytes",async pull(n){let o=await r.next();o.done?n.close():n.enqueue(o.value)},async cancel(){await r.return()}})}slice(r=0,n=this.size,o=""){let{size:i}=this,l=r<0?Math.max(i+r,0):Math.min(r,i),c=n<0?Math.max(i+n,0):Math.min(n,i),h=Math.max(c-l,0),d=F(this,Ee),_=[],g=0;for(let k of d){if(g>=h)break;let T=ArrayBuffer.isView(k)?k.byteLength:k.size;if(l&&T<=l)l-=T,c-=T;else{let y;ArrayBuffer.isView(k)?(y=k.subarray(l,Math.min(T,c)),g+=y.byteLength):(y=k.slice(l,Math.min(T,c)),g+=y.size),c-=T,_.push(y),l=0}}let A=new pr([],{type:String(o).toLowerCase()});return K(A,et,h),K(A,Ee,_),A}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](r){return r&&typeof r=="object"&&typeof r.constructor=="function"&&(typeof r.stream=="function"||typeof r.arrayBuffer=="function")&&/^(Blob|File)$/.test(r[Symbol.toStringTag])}},Ee=new WeakMap,dr=new WeakMap,et=new WeakMap,ia=new WeakMap,pr);Object.defineProperties(In.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});us=In,je=us,cs=(zn=class extends je{constructor(r,n,o={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,o),ue(this,mr,0),ue(this,hr,""),o===null&&(o={});let i=o.lastModified===void 0?Date.now():Number(o.lastModified);Number.isNaN(i)||K(this,mr,i),K(this,hr,String(n))}get name(){return F(this,hr)}get lastModified(){return F(this,mr)}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](r){return!!r&&r instanceof je&&/^(File)$/.test(r[Symbol.toStringTag])}},mr=new WeakMap,hr=new WeakMap,zn),fs=cs,at=fs,{toStringTag:Ct,iterator:ds,hasInstance:ps}=Symbol,jn=Math.random,ms="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Fn=(r,n,o)=>(r+="",/^(Blob|File)$/.test(n&&n[Ct])?[(o=o!==void 0?o+"":n[Ct]=="File"?n.name:"blob",r),n.name!==o||n[Ct]=="blob"?new at([n],o,n):n]:[r,n+""]),sa=(r,n)=>(n?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),ze=(r,n,o)=>{if(n.length<o)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${o} arguments required, but only ${n.length} present.`)},Fe=(Ln=class{constructor(...r){if(ue(this,oe,[]),r.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Ct](){return"FormData"}[ds](){return this.entries()}static[ps](r){return r&&typeof r=="object"&&r[Ct]==="FormData"&&!ms.some(n=>typeof r[n]!="function")}append(...r){ze("append",arguments,2),F(this,oe).push(Fn(...r))}delete(r){ze("delete",arguments,1),r+="",K(this,oe,F(this,oe).filter(([n])=>n!==r))}get(r){ze("get",arguments,1),r+="";for(var n=F(this,oe),o=n.length,i=0;i<o;i++)if(n[i][0]===r)return n[i][1];return null}getAll(r,n){return ze("getAll",arguments,1),n=[],r+="",F(this,oe).forEach(o=>o[0]===r&&n.push(o[1])),n}has(r){return ze("has",arguments,1),r+="",F(this,oe).some(n=>n[0]===r)}forEach(r,n){ze("forEach",arguments,1);for(var[o,i]of this)r.call(n,i,o,this)}set(...r){ze("set",arguments,2);var n=[],o=!0;r=Fn(...r),F(this,oe).forEach(i=>{i[0]===r[0]?o&&(o=!n.push(r)):n.push(i)}),o&&n.push(r),K(this,oe,n)}*entries(){yield*F(this,oe)}*keys(){for(var[r]of this)yield r}*values(){for(var[,r]of this)yield r}},oe=new WeakMap,Ln);hs=na(ls(),1),{stat:la}=Le.promises,Un=(r,n)=>Yn((0,Le.statSync)(r),r,n),Hn=(r,n)=>la(r).then(o=>Yn(o,r,n)),Nn=(r,n)=>la(r).then(o=>Qn(o,r,n)),Vn=(r,n)=>Qn((0,Le.statSync)(r),r,n),Yn=(r,n,o="")=>new je([new Zn({path:n,size:r.size,lastModified:r.mtimeMs,start:0})],{type:o}),Qn=(r,n,o="")=>new at([new Zn({path:n,size:r.size,lastModified:r.mtimeMs,start:0})],(0,Mn.basename)(n),{type:o,lastModified:r.mtimeMs}),Gn=class{constructor(r){ue(this,tt,void 0),ue(this,rt,void 0),K(this,tt,r.path),K(this,rt,r.start),this.size=r.size,this.lastModified=r.lastModified,this.originalSize=r.originalSize===void 0?r.size:r.originalSize}slice(r,n){return new Gn({path:F(this,tt),lastModified:this.lastModified,originalSize:this.originalSize,size:n-r,start:F(this,rt)+r})}async*stream(){let{mtimeMs:r,size:n}=await la(F(this,tt));if(r>this.lastModified||this.originalSize!==n)throw new hs.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Le.createReadStream)(F(this,tt),{start:F(this,rt),end:F(this,rt)+this.size-1})}get[Symbol.toStringTag](){return"Blob"}},Zn=Gn;tt=new WeakMap;rt=new WeakMap;});var Jn={};aa(Jn,{toFormData:()=>Rs});function vs(r){let n=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!n)return;let o=n[2]||n[3]||"",i=o.slice(o.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(l,c)=>String.fromCharCode(c)),i}async function Rs(r,n){if(!/multipart/i.test(n))throw new TypeError("Failed to fetch");let o=n.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new ws(o[1]||o[2]),l,c,h,d,_,g,A=[],k=new Fe,T=w=>{h+=C.decode(w,{stream:!0})},y=w=>{A.push(w)},m=()=>{let w=new at(A,g,{type:_});k.append(d,w)},b=()=>{k.append(d,h)},C=new TextDecoder("utf-8");C.decode(),i.onPartBegin=function(){i.onPartData=T,i.onPartEnd=b,l="",c="",h="",d="",_="",g=null,A.length=0},i.onHeaderField=function(w){l+=C.decode(w,{stream:!0})},i.onHeaderValue=function(w){c+=C.decode(w,{stream:!0})},i.onHeaderEnd=function(){if(c+=C.decode(),l=l.toLowerCase(),l==="content-disposition"){let w=c.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);w&&(d=w[2]||w[3]||""),g=vs(c),g&&(i.onPartData=y,i.onPartEnd=m)}else l==="content-type"&&(_=c);c="",l=""};for await(let w of r)i.write(w);return i.end(),k}var ce,j,Kn,xe,br,gr,bs,Et,gs,ys,_s,Ss,Ie,ws,Xn=cr(()=>{"use strict";ua();Tt();ce=0,j={START_BOUNDARY:ce++,HEADER_FIELD_START:ce++,HEADER_FIELD:ce++,HEADER_VALUE_START:ce++,HEADER_VALUE:ce++,HEADER_VALUE_ALMOST_DONE:ce++,HEADERS_ALMOST_DONE:ce++,PART_DATA_START:ce++,PART_DATA:ce++,END:ce++},Kn=1,xe={PART_BOUNDARY:Kn,LAST_BOUNDARY:Kn*=2},br=10,gr=13,bs=32,Et=45,gs=58,ys=97,_s=122,Ss=r=>r|32,Ie=()=>{},ws=class{constructor(r){this.index=0,this.flags=0,this.onHeaderEnd=Ie,this.onHeaderField=Ie,this.onHeadersEnd=Ie,this.onHeaderValue=Ie,this.onPartBegin=Ie,this.onPartData=Ie,this.onPartEnd=Ie,this.boundaryChars={},r=`\r
--`+r;let n=new Uint8Array(r.length);for(let o=0;o<r.length;o++)n[o]=r.charCodeAt(o),this.boundaryChars[n[o]]=!0;this.boundary=n,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=j.START_BOUNDARY}write(r){let n=0,o=r.length,i=this.index,{lookbehind:l,boundary:c,boundaryChars:h,index:d,state:_,flags:g}=this,A=this.boundary.length,k=A-1,T=r.length,y,m,b=L=>{this[L+"Mark"]=n},C=L=>{delete this[L+"Mark"]},w=(L,R,q,B)=>{(R===void 0||R!==q)&&this[L](B&&B.subarray(R,q))},D=(L,R)=>{let q=L+"Mark";q in this&&(R?(w(L,this[q],n,r),delete this[q]):(w(L,this[q],r.length,r),this[q]=0))};for(n=0;n<o;n++)switch(y=r[n],_){case j.START_BOUNDARY:if(d===c.length-2){if(y===Et)g|=xe.LAST_BOUNDARY;else if(y!==gr)return;d++;break}else if(d-1===c.length-2){if(g&xe.LAST_BOUNDARY&&y===Et)_=j.END,g=0;else if(!(g&xe.LAST_BOUNDARY)&&y===br)d=0,w("onPartBegin"),_=j.HEADER_FIELD_START;else return;break}y!==c[d+2]&&(d=-2),y===c[d+2]&&d++;break;case j.HEADER_FIELD_START:_=j.HEADER_FIELD,b("onHeaderField"),d=0;case j.HEADER_FIELD:if(y===gr){C("onHeaderField"),_=j.HEADERS_ALMOST_DONE;break}if(d++,y===Et)break;if(y===gs){if(d===1)return;D("onHeaderField",!0),_=j.HEADER_VALUE_START;break}if(m=Ss(y),m<ys||m>_s)return;break;case j.HEADER_VALUE_START:if(y===bs)break;b("onHeaderValue"),_=j.HEADER_VALUE;case j.HEADER_VALUE:y===gr&&(D("onHeaderValue",!0),w("onHeaderEnd"),_=j.HEADER_VALUE_ALMOST_DONE);break;case j.HEADER_VALUE_ALMOST_DONE:if(y!==br)return;_=j.HEADER_FIELD_START;break;case j.HEADERS_ALMOST_DONE:if(y!==br)return;w("onHeadersEnd"),_=j.PART_DATA_START;break;case j.PART_DATA_START:_=j.PART_DATA,b("onPartData");case j.PART_DATA:if(i=d,d===0){for(n+=k;n<T&&!(r[n]in h);)n+=A;n-=k,y=r[n]}if(d<c.length)c[d]===y?(d===0&&D("onPartData",!0),d++):d=0;else if(d===c.length)d++,y===gr?g|=xe.PART_BOUNDARY:y===Et?g|=xe.LAST_BOUNDARY:d=0;else if(d-1===c.length)if(g&xe.PART_BOUNDARY){if(d=0,y===br){g&=~xe.PART_BOUNDARY,w("onPartEnd"),w("onPartBegin"),_=j.HEADER_FIELD_START;break}}else g&xe.LAST_BOUNDARY&&y===Et?(w("onPartEnd"),_=j.END,g=0):d=0;if(d>0)l[d-1]=y;else if(i>0){let L=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);w("onPartData",0,i,L),i=0,b("onPartData"),n--}break;case j.END:break;default:throw new Error(`Unexpected state entered: ${_}`)}D("onHeaderField"),D("onHeaderValue"),D("onPartData"),this.index=d,this.state=_,this.flags=g}end(){if(this.state===j.HEADER_FIELD_START&&this.index===0||this.state===j.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==j.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var fo={};aa(fo,{AbortError:()=>uo,Blob:()=>je,FetchError:()=>se,File:()=>at,FormData:()=>Fe,Headers:()=>Pe,Request:()=>kt,Response:()=>J,blobFrom:()=>Hn,blobFromSync:()=>Un,default:()=>co,fileFrom:()=>Nn,fileFromSync:()=>Vn,isRedirect:()=>ma});function Ts(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let n=r.indexOf(",");if(n===-1||n<=4)throw new TypeError("malformed data: URI");let o=r.substring(5,n).split(";"),i="",l=!1,c=o[0]||"text/plain",h=c;for(let A=1;A<o.length;A++)o[A]==="base64"?l=!0:(h+=`;${o[A]}`,o[A].indexOf("charset=")===0&&(i=o[A].substring(8)));!o[0]&&!i.length&&(h+=";charset=US-ASCII",i="US-ASCII");let d=l?"base64":"ascii",_=unescape(r.substring(n+1)),g=Buffer.from(_,d);return g.type=c,g.typeFull=h,g.charset=i,g}async function ca(r){if(r[V].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[V].disturbed=!0,r[V].error)throw r[V].error;let{body:n}=r;if(n===null)return G.Buffer.alloc(0);if(!(n instanceof X.default))return G.Buffer.alloc(0);let o=[],i=0;try{for await(let l of n){if(r.size>0&&i+l.length>r.size){let c=new se(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw n.destroy(c),c}i+=l.length,o.push(l)}}catch(l){throw l instanceof vr?l:new se(`Invalid response body while trying to fetch ${r.url}: ${l.message}`,"system",l)}if(n.readableEnded===!0||n._readableState.ended===!0)try{return o.every(l=>typeof l=="string")?G.Buffer.from(o.join("")):G.Buffer.concat(o,i)}catch(l){throw new se(`Could not create Buffer from response body for ${r.url}: ${l.message}`,"system",l)}else throw new se(`Premature close of server response while trying to fetch ${r.url}`)}function Ws(r=[]){return new Pe(r.reduce((n,o,i,l)=>(i%2===0&&n.push(l.slice(i,i+2)),n),[]).filter(([n,o])=>{try{return _r(n),da(n,String(o)),!0}catch{return!1}}))}function eo(r,n=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",n&&(r.pathname="",r.search=""),r)}function zs(r){if(!lo.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function js(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let n=r.host.replace(/(^\[)|(]$)/g,""),o=(0,so.isIP)(n);return o===4&&/^127\./.test(n)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(n)?!0:/^(.+\.)*localhost$/.test(r.host)?!1:r.protocol==="file:"}function nt(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:js(r)}function Fs(r,{referrerURLCallback:n,referrerOriginCallback:o}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let i=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let l=r.referrer,c=eo(l),h=eo(l,!0);c.toString().length>4096&&(c=h),n&&(c=n(c)),o&&(h=o(h));let d=new URL(r.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return h;case"unsafe-url":return c;case"strict-origin":return nt(c)&&!nt(d)?"no-referrer":h.toString();case"strict-origin-when-cross-origin":return c.origin===d.origin?c:nt(c)&&!nt(d)?"no-referrer":h;case"same-origin":return c.origin===d.origin?c:"no-referrer";case"origin-when-cross-origin":return c.origin===d.origin?c:h;case"no-referrer-when-downgrade":return nt(c)&&!nt(d)?"no-referrer":c;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function Ls(r){let n=(r.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let i of n)i&&lo.has(i)&&(o=i);return o}async function co(r,n){return new Promise((o,i)=>{let l=new kt(r,n),{parsedURL:c,options:h}=$s(l);if(!Ms.has(c.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${c.protocol.replace(/:$/,"")}" is not supported.`);if(c.protocol==="data:"){let m=Cs(l.url),b=new J(m,{headers:{"Content-Type":m.typeFull}});o(b);return}let d=(c.protocol==="https:"?ro.default:to.default).request,{signal:_}=l,g=null,A=()=>{let m=new uo("The operation was aborted.");i(m),l.body&&l.body instanceof Q.default.Readable&&l.body.destroy(m),!(!g||!g.body)&&g.body.emit("error",m)};if(_&&_.aborted){A();return}let k=()=>{A(),y()},T=d(c.toString(),h);_&&_.addEventListener("abort",k);let y=()=>{T.abort(),_&&_.removeEventListener("abort",k)};T.on("error",m=>{i(new se(`request to ${l.url} failed, reason: ${m.message}`,"system",m)),y()}),Us(T,m=>{g&&g.body&&g.body.destroy(m)}),process.version<"v14"&&T.on("socket",m=>{let b;m.prependListener("end",()=>{b=m._eventsCount}),m.prependListener("close",C=>{if(g&&b<m._eventsCount&&!C){let w=new Error("Premature close");w.code="ERR_STREAM_PREMATURE_CLOSE",g.body.emit("error",w)}})}),T.on("response",m=>{T.setTimeout(0);let b=Ws(m.rawHeaders);if(ma(m.statusCode)){let R=b.get("Location"),q=null;try{q=R===null?null:new URL(R,l.url)}catch{if(l.redirect!=="manual"){i(new se(`uri requested responds with an invalid redirect URL: ${R}`,"invalid-redirect")),y();return}}switch(l.redirect){case"error":i(new se(`uri requested responds with a redirect, redirect mode is set to error: ${l.url}`,"no-redirect")),y();return;case"manual":break;case"follow":{if(q===null)break;if(l.counter>=l.follow){i(new se(`maximum redirect reached at: ${l.url}`,"max-redirect")),y();return}let B={headers:new Pe(l.headers),follow:l.follow,counter:l.counter+1,agent:l.agent,compress:l.compress,method:l.method,body:pa(l),signal:l.signal,size:l.size,referrer:l.referrer,referrerPolicy:l.referrerPolicy};if(!xs(l.url,q))for(let H of["authorization","www-authenticate","cookie","cookie2"])B.headers.delete(H);if(m.statusCode!==303&&l.body&&n.body instanceof Q.default.Readable){i(new se("Cannot follow redirect with body being a readable stream","unsupported-redirect")),y();return}(m.statusCode===303||(m.statusCode===301||m.statusCode===302)&&l.method==="POST")&&(B.method="GET",B.body=void 0,B.headers.delete("content-length"));let M=Ls(b);M&&(B.referrerPolicy=M),o(co(new kt(q,B))),y();return}default:return i(new TypeError(`Redirect option '${l.redirect}' is not a valid value of RequestRedirect`))}}_&&m.once("end",()=>{_.removeEventListener("abort",k)});let C=(0,Q.pipeline)(m,new Q.PassThrough,R=>{R&&i(R)});process.version<"v12.10"&&m.on("aborted",k);let w={url:l.url,status:m.statusCode,statusText:m.statusMessage,headers:b,size:l.size,counter:l.counter,highWaterMark:l.highWaterMark},D=b.get("Content-Encoding");if(!l.compress||l.method==="HEAD"||D===null||m.statusCode===204||m.statusCode===304){g=new J(C,w),o(g);return}let L={flush:$e.default.Z_SYNC_FLUSH,finishFlush:$e.default.Z_SYNC_FLUSH};if(D==="gzip"||D==="x-gzip"){C=(0,Q.pipeline)(C,$e.default.createGunzip(L),R=>{R&&i(R)}),g=new J(C,w),o(g);return}if(D==="deflate"||D==="x-deflate"){let R=(0,Q.pipeline)(m,new Q.PassThrough,q=>{q&&i(q)});R.once("data",q=>{(q[0]&15)===8?C=(0,Q.pipeline)(C,$e.default.createInflate(),B=>{B&&i(B)}):C=(0,Q.pipeline)(C,$e.default.createInflateRaw(),B=>{B&&i(B)}),g=new J(C,w),o(g)}),R.once("end",()=>{g||(g=new J(C,w),o(g))});return}if(D==="br"){C=(0,Q.pipeline)(C,$e.default.createBrotliDecompress(),R=>{R&&i(R)}),g=new J(C,w),o(g);return}g=new J(C,w),o(g)}),Bs(T,l).catch(i)})}function Us(r,n){let o=xt.Buffer.from(`0\r
\r
`),i=!1,l=!1,c;r.on("response",h=>{let{headers:d}=h;i=d["transfer-encoding"]==="chunked"&&!d["content-length"]}),r.on("socket",h=>{let d=()=>{if(i&&!l){let g=new Error("Premature close");g.code="ERR_STREAM_PREMATURE_CLOSE",n(g)}},_=g=>{l=xt.Buffer.compare(g.slice(-5),o)===0,!l&&c&&(l=xt.Buffer.compare(c.slice(-3),o.slice(0,3))===0&&xt.Buffer.compare(g.slice(-2),o.slice(3))===0),c=g};h.prependListener("close",d),h.on("data",_),r.on("close",()=>{h.removeListener("close",d),h.removeListener("data",_)})})}var to,ro,$e,Q,xt,X,ye,G,fa,At,oo,io,so,Cs,vr,se,Sr,ao,wr,Es,xs,Ps,V,Pt,pa,As,no,ks,Bs,_r,da,Pe,Os,ma,ie,J,qs,lo,Ds,$,yr,Is,kt,$s,uo,Ms,po=cr(()=>{"use strict";ua();Tt();to=ge(require("http"),1),ro=ge(require("https"),1),$e=ge(require("zlib"),1),Q=ge(require("stream"),1),xt=require("buffer"),X=ge(require("stream"),1),ye=require("util"),G=require("buffer"),fa=require("util"),At=ge(require("http"),1),oo=require("url"),io=require("util"),so=require("net");Cs=Ts,vr=class extends Error{constructor(r,n){super(r),Error.captureStackTrace(this,this.constructor),this.type=n}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}},se=class extends vr{constructor(r,n,o){super(r,n),o&&(this.code=this.errno=o.code,this.erroredSysCall=o.syscall)}},Sr=Symbol.toStringTag,ao=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[Sr]==="URLSearchParams",wr=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[Sr]),Es=r=>typeof r=="object"&&(r[Sr]==="AbortSignal"||r[Sr]==="EventTarget"),xs=(r,n)=>{let o=new URL(n).hostname,i=new URL(r).hostname;return o===i||o.endsWith(`.${i}`)},Ps=(0,ye.promisify)(X.default.pipeline),V=Symbol("Body internals"),Pt=class{constructor(r,{size:n=0}={}){let o=null;r===null?r=null:ao(r)?r=G.Buffer.from(r.toString()):wr(r)||G.Buffer.isBuffer(r)||(ye.types.isAnyArrayBuffer(r)?r=G.Buffer.from(r):ArrayBuffer.isView(r)?r=G.Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof X.default||(r instanceof Fe?(r=$n(r),o=r.type.split("=")[1]):r=G.Buffer.from(String(r))));let i=r;G.Buffer.isBuffer(r)?i=X.default.Readable.from(r):wr(r)&&(i=X.default.Readable.from(r.stream())),this[V]={body:r,stream:i,boundary:o,disturbed:!1,error:null},this.size=n,r instanceof X.default&&r.on("error",l=>{let c=l instanceof vr?l:new se(`Invalid response body while trying to fetch ${this.url}: ${l.message}`,"system",l);this[V].error=c})}get body(){return this[V].stream}get bodyUsed(){return this[V].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:n,byteLength:o}=await ca(this);return r.slice(n,n+o)}async formData(){let r=this.headers.get("content-type");if(r.startsWith("application/x-www-form-urlencoded")){let o=new Fe,i=new URLSearchParams(await this.text());for(let[l,c]of i)o.append(l,c);return o}let{toFormData:n}=await Promise.resolve().then(()=>(Xn(),Jn));return n(this.body,r)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[V].body&&this[V].body.type||"",n=await this.arrayBuffer();return new je([n],{type:r})}async json(){let r=await this.text();return JSON.parse(r)}async text(){let r=await ca(this);return new TextDecoder().decode(r)}buffer(){return ca(this)}};Pt.prototype.buffer=(0,ye.deprecate)(Pt.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Pt.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,ye.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});pa=(r,n)=>{let o,i,{body:l}=r[V];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return l instanceof X.default&&typeof l.getBoundary!="function"&&(o=new X.PassThrough({highWaterMark:n}),i=new X.PassThrough({highWaterMark:n}),l.pipe(o),l.pipe(i),r[V].stream=o,l=i),l},As=(0,ye.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),no=(r,n)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":ao(r)?"application/x-www-form-urlencoded;charset=UTF-8":wr(r)?r.type||null:G.Buffer.isBuffer(r)||ye.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof Fe?`multipart/form-data; boundary=${n[V].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${As(r)}`:r instanceof X.default?null:"text/plain;charset=UTF-8",ks=r=>{let{body:n}=r[V];return n===null?0:wr(n)?n.size:G.Buffer.isBuffer(n)?n.length:n&&typeof n.getLengthSync=="function"&&n.hasKnownLength&&n.hasKnownLength()?n.getLengthSync():null},Bs=async(r,{body:n})=>{n===null?r.end():await Ps(n,r)},_r=typeof At.default.validateHeaderName=="function"?At.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let n=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),n}},da=typeof At.default.validateHeaderValue=="function"?At.default.validateHeaderValue:(r,n)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(n)){let o=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},Pe=class extends URLSearchParams{constructor(r){let n=[];if(r instanceof Pe){let o=r.raw();for(let[i,l]of Object.entries(o))n.push(...l.map(c=>[i,c]))}else if(r!=null)if(typeof r=="object"&&!fa.types.isBoxedPrimitive(r)){let o=r[Symbol.iterator];if(o==null)n.push(...Object.entries(r));else{if(typeof o!="function")throw new TypeError("Header pairs must be iterable");n=[...r].map(i=>{if(typeof i!="object"||fa.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return n=n.length>0?n.map(([o,i])=>(_r(o),da(o,String(i)),[String(o).toLowerCase(),String(i)])):void 0,super(n),new Proxy(this,{get(o,i,l){switch(i){case"append":case"set":return(c,h)=>(_r(c),da(c,String(h)),URLSearchParams.prototype[i].call(o,String(c).toLowerCase(),String(h)));case"delete":case"has":case"getAll":return c=>(_r(c),URLSearchParams.prototype[i].call(o,String(c).toLowerCase()));case"keys":return()=>(o.sort(),new Set(URLSearchParams.prototype.keys.call(o)).keys());default:return Reflect.get(o,i,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let n=this.getAll(r);if(n.length===0)return null;let o=n.join(", ");return/^content-encoding$/i.test(r)&&(o=o.toLowerCase()),o}forEach(r,n=void 0){for(let o of this.keys())Reflect.apply(r,n,[this.get(o),o,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,n)=>(r[n]=this.getAll(n),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,n)=>{let o=this.getAll(n);return n==="host"?r[n]=o[0]:r[n]=o.length>1?o:o[0],r},{})}};Object.defineProperties(Pe.prototype,["get","entries","forEach","values"].reduce((r,n)=>(r[n]={enumerable:!0},r),{}));Os=new Set([301,302,303,307,308]),ma=r=>Os.has(r),ie=Symbol("Response internals"),J=class extends Pt{constructor(r=null,n={}){super(r,n);let o=n.status!=null?n.status:200,i=new Pe(n.headers);if(r!==null&&!i.has("Content-Type")){let l=no(r,this);l&&i.append("Content-Type",l)}this[ie]={type:"default",url:n.url,status:o,statusText:n.statusText||"",headers:i,counter:n.counter,highWaterMark:n.highWaterMark}}get type(){return this[ie].type}get url(){return this[ie].url||""}get status(){return this[ie].status}get ok(){return this[ie].status>=200&&this[ie].status<300}get redirected(){return this[ie].counter>0}get statusText(){return this[ie].statusText}get headers(){return this[ie].headers}get highWaterMark(){return this[ie].highWaterMark}clone(){return new J(pa(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(r,n=302){if(!ma(n))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new J(null,{headers:{location:new URL(r).toString()},status:n})}static error(){let r=new J(null,{status:0,statusText:""});return r[ie].type="error",r}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(J.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});qs=r=>{if(r.search)return r.search;let n=r.href.length-1,o=r.hash||(r.href[n]==="#"?"#":"");return r.href[n-o.length]==="?"?"?":""};lo=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Ds="strict-origin-when-cross-origin";$=Symbol("Request internals"),yr=r=>typeof r=="object"&&typeof r[$]=="object",Is=(0,io.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),kt=class extends Pt{constructor(r,n={}){let o;if(yr(r)?o=new URL(r.url):(o=new URL(r),r={}),o.username!==""||o.password!=="")throw new TypeError(`${o} is an url with embedded credentials.`);let i=n.method||r.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(i)&&(i=i.toUpperCase()),"data"in n&&Is(),(n.body!=null||yr(r)&&r.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=n.body?n.body:yr(r)&&r.body!==null?pa(r):null;super(l,{size:n.size||r.size||0});let c=new Pe(n.headers||r.headers||{});if(l!==null&&!c.has("Content-Type")){let _=no(l,this);_&&c.set("Content-Type",_)}let h=yr(r)?r.signal:null;if("signal"in n&&(h=n.signal),h!=null&&!Es(h))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let d=n.referrer==null?r.referrer:n.referrer;if(d==="")d="no-referrer";else if(d){let _=new URL(d);d=/^about:(\/\/)?client$/.test(_)?"client":_}else d=void 0;this[$]={method:i,redirect:n.redirect||r.redirect||"follow",headers:c,parsedURL:o,signal:h,referrer:d},this.follow=n.follow===void 0?r.follow===void 0?20:r.follow:n.follow,this.compress=n.compress===void 0?r.compress===void 0?!0:r.compress:n.compress,this.counter=n.counter||r.counter||0,this.agent=n.agent||r.agent,this.highWaterMark=n.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=n.insecureHTTPParser||r.insecureHTTPParser||!1,this.referrerPolicy=n.referrerPolicy||r.referrerPolicy||""}get method(){return this[$].method}get url(){return(0,oo.format)(this[$].parsedURL)}get headers(){return this[$].headers}get redirect(){return this[$].redirect}get signal(){return this[$].signal}get referrer(){if(this[$].referrer==="no-referrer")return"";if(this[$].referrer==="client")return"about:client";if(this[$].referrer)return this[$].referrer.toString()}get referrerPolicy(){return this[$].referrerPolicy}set referrerPolicy(r){this[$].referrerPolicy=zs(r)}clone(){return new kt(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(kt.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});$s=r=>{let{parsedURL:n}=r[$],o=new Pe(r[$].headers);o.has("Accept")||o.set("Accept","*/*");let i=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(i="0"),r.body!==null){let d=ks(r);typeof d=="number"&&!Number.isNaN(d)&&(i=String(d))}i&&o.set("Content-Length",i),r.referrerPolicy===""&&(r.referrerPolicy=Ds),r.referrer&&r.referrer!=="no-referrer"?r[$].referrer=Fs(r):r[$].referrer="no-referrer",r[$].referrer instanceof URL&&o.set("Referer",r.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),r.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip, deflate, br");let{agent:l}=r;typeof l=="function"&&(l=l(n)),!o.has("Connection")&&!l&&o.set("Connection","close");let c=qs(n),h={path:n.pathname+c,method:r.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:l};return{parsedURL:n,options:h}},uo=class extends vr{constructor(r,n="aborted"){super(r,n)}},Ms=new Set(["data:","http:","https:"])});var il={};aa(il,{default:()=>ol});module.exports=es(il);Tt();var Hs=require("http"),mo=require("stream"),it=ge(require("fs"),1),st=require("path"),ot=require("path"),Rr=require("fs"),bo=ge(require("querystring"),1);function ho(r,n,o=""){r=(0,ot.resolve)(".",r);let i=(0,Rr.readdirSync)(r),l=0,c,h;for(;l<i.length;l++)c=(0,ot.join)(r,i[l]),h=(0,Rr.statSync)(c),h.isDirectory()?ho(c,n,(0,ot.join)(o,i[l])):n((0,ot.join)(o,i[l]),c,h)}function Ns(r){let n=r.url;if(n==null)return;let o=r._parsedUrl;if(o&&o.raw===n)return o;let i=n,l="",c;if(n.length>1){let h=n.indexOf("?",1);h!==-1&&(l=n.substring(h),i=n.substring(0,h),l.length>1&&(c=bo.parse(l.substring(1))))}return r._parsedUrl={pathname:i,search:l,query:c,raw:n}}var Vs={ez:"application/andrew-inset",aw:"application/applixware",atom:"application/atom+xml",atomcat:"application/atomcat+xml",atomdeleted:"application/atomdeleted+xml",atomsvc:"application/atomsvc+xml",dwd:"application/atsc-dwd+xml",held:"application/atsc-held+xml",rsat:"application/atsc-rsat+xml",bdoc:"application/bdoc",xcs:"application/calendar+xml",ccxml:"application/ccxml+xml",cdfx:"application/cdfx+xml",cdmia:"application/cdmi-capability",cdmic:"application/cdmi-container",cdmid:"application/cdmi-domain",cdmio:"application/cdmi-object",cdmiq:"application/cdmi-queue",cu:"application/cu-seeme",mpd:"application/dash+xml",davmount:"application/davmount+xml",dbk:"application/docbook+xml",dssc:"application/dssc+der",xdssc:"application/dssc+xml",es:"application/ecmascript",ecma:"application/ecmascript",emma:"application/emma+xml",emotionml:"application/emotionml+xml",epub:"application/epub+zip",exi:"application/exi",fdt:"application/fdt+xml",pfr:"application/font-tdpfr",geojson:"application/geo+json",gml:"application/gml+xml",gpx:"application/gpx+xml",gxf:"application/gxf",gz:"application/gzip",hjson:"application/hjson",stk:"application/hyperstudio",ink:"application/inkml+xml",inkml:"application/inkml+xml",ipfix:"application/ipfix",its:"application/its+xml",jar:"application/java-archive",war:"application/java-archive",ear:"application/java-archive",ser:"application/java-serialized-object",class:"application/java-vm",js:"application/javascript",mjs:"application/javascript",json:"application/json",map:"application/json",json5:"application/json5",jsonml:"application/jsonml+json",jsonld:"application/ld+json",lgr:"application/lgr+xml",lostxml:"application/lost+xml",hqx:"application/mac-binhex40",cpt:"application/mac-compactpro",mads:"application/mads+xml",webmanifest:"application/manifest+json",mrc:"application/marc",mrcx:"application/marcxml+xml",ma:"application/mathematica",nb:"application/mathematica",mb:"application/mathematica",mathml:"application/mathml+xml",mbox:"application/mbox",mscml:"application/mediaservercontrol+xml",metalink:"application/metalink+xml",meta4:"application/metalink4+xml",mets:"application/mets+xml",maei:"application/mmt-aei+xml",musd:"application/mmt-usd+xml",mods:"application/mods+xml",m21:"application/mp21",mp21:"application/mp21",mp4s:"application/mp4",m4p:"application/mp4",doc:"application/msword",dot:"application/msword",mxf:"application/mxf",nq:"application/n-quads",nt:"application/n-triples",cjs:"application/node",bin:"application/octet-stream",dms:"application/octet-stream",lrf:"application/octet-stream",mar:"application/octet-stream",so:"application/octet-stream",dist:"application/octet-stream",distz:"application/octet-stream",pkg:"application/octet-stream",bpk:"application/octet-stream",dump:"application/octet-stream",elc:"application/octet-stream",deploy:"application/octet-stream",exe:"application/octet-stream",dll:"application/octet-stream",deb:"application/octet-stream",dmg:"application/octet-stream",iso:"application/octet-stream",img:"application/octet-stream",msi:"application/octet-stream",msp:"application/octet-stream",msm:"application/octet-stream",buffer:"application/octet-stream",oda:"application/oda",opf:"application/oebps-package+xml",ogx:"application/ogg",omdoc:"application/omdoc+xml",onetoc:"application/onenote",onetoc2:"application/onenote",onetmp:"application/onenote",onepkg:"application/onenote",oxps:"application/oxps",relo:"application/p2p-overlay+xml",xer:"application/patch-ops-error+xml",pdf:"application/pdf",pgp:"application/pgp-encrypted",asc:"application/pgp-signature",sig:"application/pgp-signature",prf:"application/pics-rules",p10:"application/pkcs10",p7m:"application/pkcs7-mime",p7c:"application/pkcs7-mime",p7s:"application/pkcs7-signature",p8:"application/pkcs8",ac:"application/pkix-attr-cert",cer:"application/pkix-cert",crl:"application/pkix-crl",pkipath:"application/pkix-pkipath",pki:"application/pkixcmp",pls:"application/pls+xml",ai:"application/postscript",eps:"application/postscript",ps:"application/postscript",provx:"application/provenance+xml",cww:"application/prs.cww",pskcxml:"application/pskc+xml",raml:"application/raml+yaml",rdf:"application/rdf+xml",owl:"application/rdf+xml",rif:"application/reginfo+xml",rnc:"application/relax-ng-compact-syntax",rl:"application/resource-lists+xml",rld:"application/resource-lists-diff+xml",rs:"application/rls-services+xml",rapd:"application/route-apd+xml",sls:"application/route-s-tsid+xml",rusd:"application/route-usd+xml",gbr:"application/rpki-ghostbusters",mft:"application/rpki-manifest",roa:"application/rpki-roa",rsd:"application/rsd+xml",rss:"application/rss+xml",rtf:"application/rtf",sbml:"application/sbml+xml",scq:"application/scvp-cv-request",scs:"application/scvp-cv-response",spq:"application/scvp-vp-request",spp:"application/scvp-vp-response",sdp:"application/sdp",senmlx:"application/senml+xml",sensmlx:"application/sensml+xml",setpay:"application/set-payment-initiation",setreg:"application/set-registration-initiation",shf:"application/shf+xml",siv:"application/sieve",sieve:"application/sieve",smi:"application/smil+xml",smil:"application/smil+xml",rq:"application/sparql-query",srx:"application/sparql-results+xml",gram:"application/srgs",grxml:"application/srgs+xml",sru:"application/sru+xml",ssdl:"application/ssdl+xml",ssml:"application/ssml+xml",swidtag:"application/swid+xml",tei:"application/tei+xml",teicorpus:"application/tei+xml",tfi:"application/thraud+xml",tsd:"application/timestamped-data",toml:"application/toml",trig:"application/trig",ttml:"application/ttml+xml",ubj:"application/ubjson",rsheet:"application/urc-ressheet+xml",td:"application/urc-targetdesc+xml",vxml:"application/voicexml+xml",wasm:"application/wasm",wgt:"application/widget",hlp:"application/winhlp",wsdl:"application/wsdl+xml",wspolicy:"application/wspolicy+xml",xaml:"application/xaml+xml",xav:"application/xcap-att+xml",xca:"application/xcap-caps+xml",xdf:"application/xcap-diff+xml",xel:"application/xcap-el+xml",xns:"application/xcap-ns+xml",xenc:"application/xenc+xml",xhtml:"application/xhtml+xml",xht:"application/xhtml+xml",xlf:"application/xliff+xml",xml:"application/xml",xsl:"application/xml",xsd:"application/xml",rng:"application/xml",dtd:"application/xml-dtd",xop:"application/xop+xml",xpl:"application/xproc+xml",xslt:"application/xml",xspf:"application/xspf+xml",mxml:"application/xv+xml",xhvml:"application/xv+xml",xvml:"application/xv+xml",xvm:"application/xv+xml",yang:"application/yang",yin:"application/yin+xml",zip:"application/zip","3gpp":"video/3gpp",adp:"audio/adpcm",amr:"audio/amr",au:"audio/basic",snd:"audio/basic",mid:"audio/midi",midi:"audio/midi",kar:"audio/midi",rmi:"audio/midi",mxmf:"audio/mobile-xmf",mp3:"audio/mpeg",m4a:"audio/mp4",mp4a:"audio/mp4",mpga:"audio/mpeg",mp2:"audio/mpeg",mp2a:"audio/mpeg",m2a:"audio/mpeg",m3a:"audio/mpeg",oga:"audio/ogg",ogg:"audio/ogg",spx:"audio/ogg",opus:"audio/ogg",s3m:"audio/s3m",sil:"audio/silk",wav:"audio/wav",weba:"audio/webm",xm:"audio/xm",ttc:"font/collection",otf:"font/otf",ttf:"font/ttf",woff:"font/woff",woff2:"font/woff2",exr:"image/aces",apng:"image/apng",avif:"image/avif",bmp:"image/bmp",cgm:"image/cgm",drle:"image/dicom-rle",emf:"image/emf",fits:"image/fits",g3:"image/g3fax",gif:"image/gif",heic:"image/heic",heics:"image/heic-sequence",heif:"image/heif",heifs:"image/heif-sequence",hej2:"image/hej2k",hsj2:"image/hsj2",ief:"image/ief",jls:"image/jls",jp2:"image/jp2",jpg2:"image/jp2",jpeg:"image/jpeg",jpg:"image/jpeg",jpe:"image/jpeg",jph:"image/jph",jhc:"image/jphc",jpm:"image/jpm",jpx:"image/jpx",jpf:"image/jpx",jxr:"image/jxr",jxra:"image/jxra",jxrs:"image/jxrs",jxs:"image/jxs",jxsc:"image/jxsc",jxsi:"image/jxsi",jxss:"image/jxss",ktx:"image/ktx",ktx2:"image/ktx2",png:"image/png",btif:"image/prs.btif",pti:"image/prs.pti",sgi:"image/sgi",svg:"image/svg+xml",svgz:"image/svg+xml",t38:"image/t38",tif:"image/tiff",tiff:"image/tiff",tfx:"image/tiff-fx",webp:"image/webp",wmf:"image/wmf","disposition-notification":"message/disposition-notification",u8msg:"message/global",u8dsn:"message/global-delivery-status",u8mdn:"message/global-disposition-notification",u8hdr:"message/global-headers",eml:"message/rfc822",mime:"message/rfc822","3mf":"model/3mf",gltf:"model/gltf+json",glb:"model/gltf-binary",igs:"model/iges",iges:"model/iges",msh:"model/mesh",mesh:"model/mesh",silo:"model/mesh",mtl:"model/mtl",obj:"model/obj",stpz:"model/step+zip",stpxz:"model/step-xml+zip",stl:"model/stl",wrl:"model/vrml",vrml:"model/vrml",x3db:"model/x3d+fastinfoset",x3dbz:"model/x3d+binary",x3dv:"model/x3d-vrml",x3dvz:"model/x3d+vrml",x3d:"model/x3d+xml",x3dz:"model/x3d+xml",appcache:"text/cache-manifest",manifest:"text/cache-manifest",ics:"text/calendar",ifb:"text/calendar",coffee:"text/coffeescript",litcoffee:"text/coffeescript",css:"text/css",csv:"text/csv",html:"text/html",htm:"text/html",shtml:"text/html",jade:"text/jade",jsx:"text/jsx",less:"text/less",markdown:"text/markdown",md:"text/markdown",mml:"text/mathml",mdx:"text/mdx",n3:"text/n3",txt:"text/plain",text:"text/plain",conf:"text/plain",def:"text/plain",list:"text/plain",log:"text/plain",in:"text/plain",ini:"text/plain",dsc:"text/prs.lines.tag",rtx:"text/richtext",sgml:"text/sgml",sgm:"text/sgml",shex:"text/shex",slim:"text/slim",slm:"text/slim",spdx:"text/spdx",stylus:"text/stylus",styl:"text/stylus",tsv:"text/tab-separated-values",t:"text/troff",tr:"text/troff",roff:"text/troff",man:"text/troff",me:"text/troff",ms:"text/troff",ttl:"text/turtle",uri:"text/uri-list",uris:"text/uri-list",urls:"text/uri-list",vcard:"text/vcard",vtt:"text/vtt",yaml:"text/yaml",yml:"text/yaml","3gp":"video/3gpp","3g2":"video/3gpp2",h261:"video/h261",h263:"video/h263",h264:"video/h264",m4s:"video/iso.segment",jpgv:"video/jpeg",jpgm:"image/jpm",mj2:"video/mj2",mjp2:"video/mj2",ts:"video/mp2t",mp4:"video/mp4",mp4v:"video/mp4",mpg4:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",mpe:"video/mpeg",m1v:"video/mpeg",m2v:"video/mpeg",ogv:"video/ogg",qt:"video/quicktime",mov:"video/quicktime",webm:"video/webm"};function Ys(r){let n=(""+r).trim().toLowerCase(),o=n.lastIndexOf(".");return Vs[~o?n.substring(++o):n]}var Qs=()=>{};function Gs(r,n){for(let o=0;o<n.length;o++)if(n[o].test(r))return!0}function go(r,n){let o=0,i,l=r.length-1;r.charCodeAt(l)===47&&(r=r.substring(0,l));let c=[],h=`${r}/index`;for(;o<n.length;o++)i=n[o]?`.${n[o]}`:"",r&&c.push(r+i),c.push(h+i);return c}function Zs(r,n,o){let i=0,l,c=go(n,o);for(;i<c.length;i++)if(l=r[c[i]])return l}function Ks(r,n,o,i){let l=0,c=go(o,i),h,d,_,g;for(;l<c.length;l++)if(h=(0,st.normalize)((0,st.join)(r,_=c[l])),h.startsWith(r)&&it.existsSync(h)){if(d=it.statSync(h),d.isDirectory())continue;return g=yo(_,d,n),g["Cache-Control"]=n?"no-cache":"no-store",{abs:h,stats:d,headers:g}}}function Js(r,n){return n.statusCode=404,n.end()}function Xs(r,n,o,i,l){let c=200,h,d={};l={...l};for(let _ in l)h=n.getHeader(_),h&&(l[_]=h);if((h=n.getHeader("content-type"))&&(l["Content-Type"]=h),r.headers.range){c=206;let[_,g]=r.headers.range.replace("bytes=","").split("-"),A=d.end=parseInt(g,10)||i.size-1,k=d.start=parseInt(_,10)||0;if(k>=i.size||A>=i.size)return n.setHeader("Content-Range",`bytes */${i.size}`),n.statusCode=416,n.end();l["Content-Range"]=`bytes ${k}-${A}/${i.size}`,l["Content-Length"]=A-k+1,l["Accept-Ranges"]="bytes"}n.writeHead(c,l),it.createReadStream(o,d).pipe(n)}var el={".br":"br",".gz":"gzip"};function yo(r,n,o){let i=el[r.slice(-3)],l=Ys(r.slice(0,i&&-3))||"";l==="text/html"&&(l+=";charset=utf-8");let c={"Content-Length":n.size,"Content-Type":l,"Last-Modified":n.mtime.toUTCString()};return i&&(c["Content-Encoding"]=i),o&&(c.ETag=`W/"${n.size}-${n.mtime.getTime()}"`),c}function tl(r,n={}){r=(0,st.resolve)(r||".");let o=n.onNoMatch||Js,i=n.setHeaders||Qs,l=n.extensions||["html","htm"],c=n.gzip&&l.map(m=>`${m}.gz`).concat("gz"),h=n.brotli&&l.map(m=>`${m}.br`).concat("br"),d={},_="/",g=!!n.etag,A=!!n.single;if(typeof n.single=="string"){let m=n.single.lastIndexOf(".");_+=~m?n.single.substring(0,m):n.single}let k=[];n.ignores!==!1&&(k.push(/[/]([A-Za-z\s\d~$._-]+\.\w+){1,}$/),n.dotfiles?k.push(/\/\.\w/):k.push(/\/\.well-known/),[].concat(n.ignores||[]).forEach(m=>{k.push(new RegExp(m,"i"))}));let T=n.maxAge!=null&&`public,max-age=${n.maxAge}`;T&&n.immutable?T+=",immutable":T&&n.maxAge===0&&(T+=",must-revalidate"),n.dev||ho(r,(m,b,C)=>{if(!/\.well-known[\\+\/]/.test(m)){if(!n.dotfiles&&/(^\.|[\\+|\/+]\.)/.test(m))return}let w=yo(m,C,g);T&&(w["Cache-Control"]=T),d["/"+m.normalize().replace(/\\+/g,"/")]={abs:b,stats:C,headers:w}});let y=n.dev?Ks.bind(0,r,g):Zs.bind(0,d);return function(m,b,C){let w=[""],D=Ns(m).pathname,L=m.headers["accept-encoding"]||"";if(c&&L.includes("gzip")&&w.unshift(...c),h&&/(br|brotli)/i.test(L)&&w.unshift(...h),w.push(...l),D.indexOf("%")!==-1)try{D=decodeURIComponent(D)}catch{}let R=y(D,w)||A&&!Gs(D,k)&&y(_,w);if(!R)return C?C():o(m,b);if(g&&m.headers["if-none-match"]===R.headers.ETag)return b.writeHead(304),b.end();(c||h)&&b.setHeader("Vary","Accept-Encoding"),i(b,D,R.stats),Xs(m,b,R.abs,R.stats,R.headers)}}function Tr(r,n={}){let{origin:o=process.env.ORIGIN,trustProxy:i=process.env.TRUST_PROXY==="1",staticAssetsDir:l,sirvOptions:c={},useNativeFetch:h=!1}=n,d=rl(h),{protocol:_,hostname:g}=o?new URL(o):{},A=l?tl(l,c):null,k=async(T,y,m)=>{await d;function b(q){return(String(T.headers["x-forwarded-"+q])||"").split(",",1)[0].trim()}_=_||T.protocol||i&&b("proto")||T.socket.encrypted&&"https"||"http",g=g||i&&b("host")||T.headers.host;let C=T.ip||i&&b("for")||T.socket.remoteAddress||"",w=new Request(_+"://"+g+T.url,{method:T.method,headers:T.headers,body:T.method==="GET"||T.method==="HEAD"?void 0:T}),D=!1,R=await r({request:w,ip:C,waitUntil(q){},passThrough(){D=!0},platform:{request:T,response:y}});if(!m||!D){if(y.statusCode=R.status,"raw"in R.headers){let B=R.headers.raw();for(let[M,H]of Object.entries(B))y.setHeader(M,H)}else for(let[B,M]of R.headers)y.setHeader(B,M);let q=R.headers.get("content-length");if(R.body)if(q)for await(let B of R.body)B=Buffer.from(B),y.write(B);else{let B=R.body[Symbol.asyncIterator](),M=await B.next();if(M.done)y.setHeader("content-length","0");else{let H=B.next(),fe=await Promise.race([H,Promise.resolve(null)]);if(fe&&fe.done)y.setHeader("content-length",M.value.length),y.write(M.value);else for(y.write(M.value),fe=await H;!fe.done;fe=await B.next())y.write(Buffer.from(fe.value))}}else q||y.setHeader("content-length","0");y.end()}m==null||m()};return A?(T,y,m)=>A(T,y,()=>{k(T,y,m)}):k}async function rl(r=!1){if(!r||r==="auto"&&typeof fetch>"u")await Promise.resolve().then(()=>(po(),fo)).then(n=>{globalThis.fetch=n.default,globalThis.Request=n.Request,globalThis.Headers=n.Headers;class o extends n.Response{constructor(l,c){l instanceof ReadableStream&&(l=mo.Readable.from(l)),super(l,c)}}globalThis.Response=o});else if(typeof TransformStream>"u"){if(typeof fetch>"u")throw new Error("Native fetch is not available. Try running with --experimental-fetch or use node-fetch.");await import("stream/web").then(n=>{global.TransformStream=n.TransformStream})}}function _o(){let r={handlers:[]};return new Proxy(r,{get(n,o){return o in n?n[o]:n[o]=function(i,l){let c;if(typeof i=="string"&&(i=RegExp(`^${i.replace(/(\/?)\*/g,"($1.*)?").replace(/\/$/,"").replace(/:(\w+)(\?)?(\.)?/g,"$2(?<$1>[^/]+)$2$3").replace(/\.(?=[\w(])/,"\\.").replace(/\)\.\?\(([^[]+)\[\^/g,"?)\\.?($1(?<=\\.)[^\\.")}/*$`)),typeof i=="function")c=i;else if(i instanceof RegExp)c=d=>{if(o==="all"||d.method===String(o).toUpperCase()){let _=d.url.pathname.match(i);return _&&(_.groups||{})}};else throw new TypeError("Invalid matcher");function h(d){if(d.url=new URL(d.request.url),d.method=d.request.method,d.params=c(d),!!d.params)return l(d)}n.handlers.push(h)}}})}function al(r){return r.passThrough(),new Response("Not found",{status:404})}function wo(...r){let n=r.flat().filter(Boolean);return n.unshift(o=>{o.handleError=i=>(console.error(i),new Response("Internal Server Error",{status:500}))}),n.map(nl).reduceRight((o,i)=>async l=>(l.next=()=>o(l),await i(l)||o(l)),al)}function nl(r){return async n=>{let o;try{o=await(r(n)||n.next())}catch(i){if(i instanceof Response)return i;if(So(i))return i.toResponse();if(n.handleError)return n.handleError(i);throw i}return So(o)?o.toResponse():o}}function So(r){return r&&"toResponse"in r}var Ae=_o();Ae.get("/",r=>new Response(`<h1>Hello from Hattip!</h1><p>URL: <span>${r.request.url}</span></p><p>Your IP address is: <span>${r.ip}</span></p>`,{headers:{"content-type":"text/html; charset=utf-8"}}));Ae.get("/binary",()=>new Response(new TextEncoder().encode("This is rendered as binary with non-ASCII chars \u{1F60A}")));Ae.get("/bin-stream",r=>{let n=Number(r.url.searchParams.get("delay"))||0,o=new TextEncoder().encode("This is rendered as binary stream with non-ASCII chars \u{1F60A}"),{readable:i,writable:l}=new TransformStream;async function c(_){let g=l.getWriter();for await(let A of _)g.write(A);g.close()}async function*h(){for(let _ of o)n&&await new Promise(g=>setTimeout(g,n)),yield new Uint8Array([_])}let d=c(h());return r.waitUntil(d),new Response(i)});Ae.post("/echo-text",async r=>new Response(await r.request.text()));Ae.post("/echo-bin",async r=>new Response(new Uint8Array(await r.request.arrayBuffer()).join(", ")));Ae.get("/cookies",()=>{let r=new Headers;return r.append("Set-Cookie","name1=value1"),r.append("Set-Cookie","name2=value2"),new Response(null,{headers:r})});Ae.get("/status",()=>new Response(null,{status:201}));var vo=wo(Ae.handlers);var Ro=Tr(vo);var ol=Tr(Ro);0&&(module.exports={});
/*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
